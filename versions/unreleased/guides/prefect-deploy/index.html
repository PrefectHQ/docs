
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Prefect deployments encapsulate a flow, allowing flow runs to be scheduled and triggered via API. Learn how to easily manage your code and deployments.">
      
      
      
        <link rel="canonical" href="https://docs.prefect.io/latest/guides/prefect-deploy/">
      
      
        <link rel="prev" href="../managed-execution/">
      
      
        <link rel="next" href="../upgrade-guide-agents-to-workers/">
      
      
        
      
      
      <link rel="icon" href="../../img/favicon.png">
      <meta name="generator" content="mkdocs-1.5.3, mkdocs-material-9.4.8+insiders-4.43.0">
    
    
      
        <title>Deploying Flows to Work pools and Workers - Prefect Docs</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.382dd0b9.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.ab4e12ef.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin=>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Inter:300,300i,400,400i,700,700i%7CSource+Code+Pro:400,400i,700,700i&amp;display=fallback">
        <style>:root{--md-text-font:"Inter";--md-code-font:"Source Code Pro"}</style>
      
    
    
      <link rel="stylesheet" href="../../assets/_mkdocstrings.css">
    
      <link rel="stylesheet" href="../../stylesheets/theme.css">
    
      <link rel="stylesheet" href="../../stylesheets/admonitions.css">
    
      <link rel="stylesheet" href="../../stylesheets/api_ref.css">
    
      <link rel="stylesheet" href="../../stylesheets/rest_ref.css">
    
      <link rel="stylesheet" href="../../stylesheets/syntax_highlights.css">
    
      <link rel="stylesheet" href="../../stylesheets/termynal.css">
    
      <link rel="stylesheet" href="../../stylesheets/extra.css">
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    

      
  


  <script src="../../assets/external/cdn.amplitude.com/libs/analytics-browser-1.9.1-min.js.gz.js"></script>
<script type="text/javascript">
const amplitudeKey = "c97dd2acbf306ab7bf54aca0aeb7ffa1"
const amplitudeUrl = "/2/httpapi"

const addUrl = (event) => {
  const deviceId = amplitude.getDeviceId()
  const { href = '' } = event.target
  const url = new URL(href)
  url.searchParams.set('deviceId', deviceId)
  event.target.href = url.toString()
}

const removeUrl = (event) => {
  const { href = '' } = event.target
  const url = new URL(href)
  url.searchParams.delete('deviceId')
  event.target.href = url.toString()
}

const urls = [
  'https://app.prefect.cloud',
  'https://app.stg.prefect.dev',
  'https://app.prefect.dev',
]

const selector = urls.map((url) => `a[href^="${url}"]`).join(',')

const addDeviceIdToAppLinks = () => {
  const elements = document.querySelectorAll(selector)

  elements.forEach((element) => {
    element.addEventListener('mouseenter', addUrl)
    element.addEventListener('mouseleave', removeUrl)
    element.addEventListener('focus', addUrl)
    element.addEventListener('blur', removeUrl)
    element.addEventListener('touchstart', addUrl)
    element.addEventListener('touchend', removeUrl)
  })
}


const init = () => {
  amplitude.init(amplitudeKey, undefined, {
    useBatch: true,
    serverUrl: amplitudeUrl,
    attribution: {
      disabled: false,
      trackNewCampaigns: true,
      trackPageViews: true,
      resetSessionOnNewCampaign: true,
    },
    defaultTracking: {
      pageViews: {
        trackOn: function() { return true},
        eventType: "Page View: Docs",
        trackHistoryChanges: "all",
      },
      sessions: false,
      formInteractions: true,
      fileDownloads: true,
    },
  })
}

function trackPageView() {
  amplitude.track(
    'Page View: Docs',
    {
      'url': window.href,
      'title': document.title,
      'referrer': document.referrer,
      'path': window.location.pathname
    }
  )
}

if (amplitudeKey){
  document.addEventListener("DOMContentLoaded", function() {
      init()
      setTimeout(addDeviceIdToAppLinks)
      setTimeout(trackPageView)
  });
}
</script>


  

<script id="__analytics">function __md_analytics(){function n(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],n("js",new Date),n("config","G-3M31G9B0QJ"),document.addEventListener("DOMContentLoaded",function(){document.forms.search&&document.forms.search.query.addEventListener("blur",function(){this.value&&n("event","search",{search_term:this.value})}),document$.subscribe(function(){var a=document.forms.feedback;if(void 0!==a)for(var e of a.querySelectorAll("[type=submit]"))e.addEventListener("click",function(e){e.preventDefault();var t=document.location.pathname,e=this.getAttribute("data-md-value");n("event","feedback",{page:t,data:e}),a.firstElementChild.disabled=!0;e=a.querySelector(".md-feedback__note [data-md-value='"+e+"']");e&&(e.hidden=!1)}),a.hidden=!1}),location$.subscribe(function(e){n("config","G-3M31G9B0QJ",{page_path:e.pathname})})});var e=document.createElement("script");e.async=!0,e.src="https://www.googletagmanager.com/gtag/js?id=G-3M31G9B0QJ",document.getElementById("__analytics").insertAdjacentElement("afterEnd",e)}</script>
  
    <script>"undefined"!=typeof __md_analytics&&__md_analytics()</script>
  

    

    
  
<meta property="og:type" content="website" />
<meta property="og:title" content="Deploying Flows to Work pools and Workers - Prefect Docs" />
<meta property="og:description" content="Prefect deployments encapsulate a flow, allowing flow runs to be scheduled and triggered via API. Learn how to easily manage your code and deployments." />
<meta property="og:image" content="https://docs.prefect.io/latest/assets/images/social/guides/prefect-deploy.png" />
<meta property="og:image:type" content="image/png" />
<meta property="og:image:width" content="1200" />
<meta property="og:image:height" content="630" />
<meta property="og:url" content="https://docs.prefect.io/latest/guides/prefect-deploy/" />
<meta property="twitter:card" content="summary_large_image" />
<meta property="twitter:title" content="Deploying Flows to Work pools and Workers - Prefect Docs" />
<meta property="twitter:description" content="Prefect deployments encapsulate a flow, allowing flow runs to be scheduled and triggered via API. Learn how to easily manage your code and deployments." />
<meta property="twitter:image" content="https://docs.prefect.io/latest/assets/images/social/guides/prefect-deploy.png" />
</head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="#0225AC" data-md-color-accent="#0225AC">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#deploying-flows-to-work-pools-and-workers" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      <div data-md-color-scheme="default" data-md-component="outdated" hidden>
        
          <aside class="md-banner md-banner--warning">
            <div class="md-banner__inner md-grid md-typeset">
              
  You're viewing the docs for Prefect unreleased.
  <a href="../../.."> 
    <strong>Click here to view the latest docs.</strong>
  </a>

  <script type="text/javascript">
    // extract the version from the URL
    var version = window.location.pathname.split('/')[1];
    console.log("version is latest!")
    // check if the version is 'latest'
    var showVersionBanner = version !== 'latest';
    
    // hide the announcement bar if we're not showing the latest version of the docs
    // wait until dom is loaded
    document.addEventListener("DOMContentLoaded", function(event) {
      if (showVersionBanner) {
        document.querySelector('[data-md-component="announce"]').setAttribute('hidden', '');
      }
    });
  </script>

            </div>
            <script>var el=document.querySelector("[data-md-component=outdated]"),outdated=__md_get("__outdated",sessionStorage);!0===outdated&&el&&(el.hidden=!1)</script>
          </aside>
        
      </div>
    
    
      <!-- overrides partial for header, adding tab for Prefect Cloud -->




<header class="md-header md-header--shadow md-header--lifted" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="Prefect Docs"
      class="md-header__button md-logo" aria-label="Prefect Docs" data-md-component="logo">
      
  <img src="../../img/logos/prefect-logo-white.svg" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Prefect Docs
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
            Deploying Flows to Work pools and Workers
            
          </span>
        </div>
      </div>
    </div>
    
    
    <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="default" data-md-color-primary="#0225AC" data-md-color-accent="#0225AC"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 7a5 5 0 0 1 5 5 5 5 0 0 1-5 5 5 5 0 0 1-5-5 5 5 0 0 1 5-5m0 2a3 3 0 0 0-3 3 3 3 0 0 0 3 3 3 3 0 0 0 3-3 3 3 0 0 0-3-3m0-7 2.39 3.42C13.65 5.15 12.84 5 12 5c-.84 0-1.65.15-2.39.42L12 2M3.34 7l4.16-.35A7.2 7.2 0 0 0 5.94 8.5c-.44.74-.69 1.5-.83 2.29L3.34 7m.02 10 1.76-3.77a7.131 7.131 0 0 0 2.38 4.14L3.36 17M20.65 7l-1.77 3.79a7.023 7.023 0 0 0-2.38-4.15l4.15.36m-.01 10-4.14.36c.59-.51 1.12-1.14 1.54-1.86.42-.73.69-1.5.83-2.29L20.64 17M12 22l-2.41-3.44c.74.27 1.55.44 2.41.44.82 0 1.63-.17 2.37-.44L12 22Z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="#0225AC" data-md-color-accent="#0225AC"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m17.75 4.09-2.53 1.94.91 3.06-2.63-1.81-2.63 1.81.91-3.06-2.53-1.94L12.44 4l1.06-3 1.06 3 3.19.09m3.5 6.91-1.64 1.25.59 1.98-1.7-1.17-1.7 1.17.59-1.98L15.75 11l2.06-.05L18.5 9l.69 1.95 2.06.05m-2.28 4.95c.83-.08 1.72 1.1 1.19 1.85-.32.45-.66.87-1.08 1.27C15.17 23 8.84 23 4.94 19.07c-3.91-3.9-3.91-10.24 0-14.14.4-.4.82-.76 1.27-1.08.75-.53 1.93.36 1.85 1.19-.27 2.86.69 5.83 2.89 8.02a9.96 9.96 0 0 0 8.02 2.89m-1.64 2.02a12.08 12.08 0 0 1-7.8-3.47c-2.17-2.19-3.33-5-3.49-7.82-2.81 3.14-2.7 7.96.31 10.98 3.02 3.01 7.84 3.12 10.98.31Z"/></svg>
      </label>
    
  
</form>
    
    
    
    <script>var media,input,key,value,palette=__md_get("__palette");if(palette&&palette.color){"(prefers-color-scheme)"===palette.color.media&&(media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']"),palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent"));for([key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
    <label class="md-header__button md-icon" for="__search">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
    </label>
    <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
    <div class="md-header__source">
      <a href="https://github.com/PrefectHQ/prefect" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.4.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
    

    <!-- adding tab for Prefect Cloud -->
    <a class="md-button cloud-button list-unstyled" target="_blank" rel="noopener noreferrer" href="https://app.prefect.cloud"><b>Try Prefect
        Cloud →</b></a>
    <!-- end adding Perfect Cloud button-->

  </nav>
  
  
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="Prefect Docs" class="md-nav__button md-logo" aria-label="Prefect Docs" data-md-component="logo">
      
  <img src="../../img/logos/prefect-logo-white.svg" alt="logo">

    </a>
    Prefect Docs
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/PrefectHQ/prefect" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.4.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
    
    
      
        
          
        
      
        
      
        
      
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../.." class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    
  
    Getting Started
  

    
  </span>
  
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_1" id="__nav_1_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_1">
            <span class="md-nav__icon md-icon"></span>
            
  
    Getting Started
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../getting-started/installation/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    Installation
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../getting-started/quickstart/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    Quickstart
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../tutorial/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    
  
    Tutorial
  

    
  </span>
  
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_2" id="__nav_2_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            
  
    Tutorial
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorial/flows/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    Flows
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorial/tasks/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    Tasks
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorial/deployments/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    Deploying Flows
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorial/workers/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    Workers & Work Pools
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
    
    
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" checked>
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    
  
    How-to Guides
  

    
  </span>
  
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_3" id="__nav_3_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            
  
    How-to Guides
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_2" >
        
          
          <label class="md-nav__link" for="__nav_3_2" id="__nav_3_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    
  
    Development
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_2">
            <span class="md-nav__icon md-icon"></span>
            
  
    Development
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../host/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    Hosting
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../settings/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    Profiles & Settings
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../testing/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    Testing
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../global-concurrency-limits/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    Global Concurrency Limits
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../runtime-context/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    Runtime Context
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../variables/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    Variables
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../using-the-client/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    Prefect Client
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../webhooks/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    Webhooks
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="https://registry.terraform.io/providers/PrefectHQ/prefect/latest/docs/guides/getting-started" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    Terraform Provider
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../recipes/recipes/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    Recipes
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_3" >
        
          
          <label class="md-nav__link" for="__nav_3_3" id="__nav_3_3_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    
  
    Execution
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_3">
            <span class="md-nav__icon md-icon"></span>
            
  
    Execution
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../docker/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    Docker
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../state-change-hooks/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    State Change Hooks
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../dask-ray-task-runners/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    Dask & Ray
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../moving-data/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    Read and Write Data
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../big-data/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    Big Data
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../logs/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    Logging
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../troubleshooting/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    Troubleshooting
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../managed-execution/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    Managed Execution
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
    
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_4" checked>
        
          
          <label class="md-nav__link" for="__nav_3_4" id="__nav_3_4_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    
  
    Work Pools
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_4_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_3_4">
            <span class="md-nav__icon md-icon"></span>
            
  
    Work Pools
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    
  
    Deploying Flows to Work pools and Workers
  

    
  </span>
  
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    
  
    Deploying Flows to Work pools and Workers
  

    
  </span>
  
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#work-pool-based-deployments" class="md-nav__link">
    <span class="md-ellipsis">
      
        <span class="md-typeset">
          Work pool-based deployments
        </span>
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#creating-work-pool-based-deployments" class="md-nav__link">
    <span class="md-ellipsis">
      
        <span class="md-typeset">
          Creating work pool-based deployments
        </span>
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Creating work pool-based deployments">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#automatically-bake-your-code-into-a-docker-image" class="md-nav__link">
    <span class="md-ellipsis">
      
        <span class="md-typeset">
          Automatically bake your code into a Docker image
        </span>
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#automatically-build-a-custom-docker-image-with-a-local-dockerfile" class="md-nav__link">
    <span class="md-ellipsis">
      
        <span class="md-typeset">
          Automatically build a custom Docker image with a local Dockerfile
        </span>
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#store-you-code-in-git-based-cloud-storage" class="md-nav__link">
    <span class="md-ellipsis">
      
        <span class="md-typeset">
          Store you code in git-based cloud storage
        </span>
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#store-your-code-in-cloud-provider-storage" class="md-nav__link">
    <span class="md-ellipsis">
      
        <span class="md-typeset">
          Store your code in cloud provider storage
        </span>
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#additional-configuration-with-deploy" class="md-nav__link">
    <span class="md-ellipsis">
      
        <span class="md-typeset">
          Additional configuration with <code>.deploy</code>
        </span>
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#deployment-actions" class="md-nav__link">
    <span class="md-ellipsis">
      
        <span class="md-typeset">
          Deployment actions
        </span>
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#the-build-action" class="md-nav__link">
    <span class="md-ellipsis">
      
        <span class="md-typeset">
          The build action
        </span>
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#the-push-action" class="md-nav__link">
    <span class="md-ellipsis">
      
        <span class="md-typeset">
          The push action
        </span>
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#the-pull-action" class="md-nav__link">
    <span class="md-ellipsis">
      
        <span class="md-typeset">
          The pull action
        </span>
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#utility-steps" class="md-nav__link">
    <span class="md-ellipsis">
      
        <span class="md-typeset">
          Utility steps
        </span>
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#templating-options" class="md-nav__link">
    <span class="md-ellipsis">
      
        <span class="md-typeset">
          Templating options
        </span>
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#deployment-configurations" class="md-nav__link">
    <span class="md-ellipsis">
      
        <span class="md-typeset">
          Deployment Configurations
        </span>
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#working-with-multiple-deployments" class="md-nav__link">
    <span class="md-ellipsis">
      
        <span class="md-typeset">
          Working with multiple deployments
        </span>
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#reusing-configuration-across-deployments" class="md-nav__link">
    <span class="md-ellipsis">
      
        <span class="md-typeset">
          Reusing configuration across deployments
        </span>
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#deployment-declaration-reference" class="md-nav__link">
    <span class="md-ellipsis">
      
        <span class="md-typeset">
          Deployment declaration reference
        </span>
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Deployment declaration reference">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#deployment-fields" class="md-nav__link">
    <span class="md-ellipsis">
      
        <span class="md-typeset">
          Deployment fields
        </span>
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#schedule-fields" class="md-nav__link">
    <span class="md-ellipsis">
      
        <span class="md-typeset">
          Schedule fields
        </span>
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#work-pool-fields" class="md-nav__link">
    <span class="md-ellipsis">
      
        <span class="md-typeset">
          Work pool fields
        </span>
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#deployment-mechanics" class="md-nav__link">
    <span class="md-ellipsis">
      
        <span class="md-typeset">
          Deployment mechanics
        </span>
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#next-steps" class="md-nav__link">
    <span class="md-ellipsis">
      
        <span class="md-typeset">
          Next steps
        </span>
      
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../upgrade-guide-agents-to-workers/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    Upgrade from Agents to Workers
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../deployment/kubernetes/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    Kubernetes
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../deployment/push-work-pools/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    Serverless Push Work Pools
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../deployment/serverless-workers/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    Serverless Work Pools with Workers
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../deployment/daemonize/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    Daemonize Processes
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../deployment/developing-a-new-worker-type/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    Custom Workers
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../concepts/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    
  
    Concepts
  

    
  </span>
  
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_4" id="__nav_4_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            
  
    Concepts
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../concepts/flows/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    Flows
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../concepts/tasks/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    Tasks
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../concepts/deployments/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    Deployments
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../concepts/work-pools/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    Work Pools & Workers
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../concepts/schedules/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    Schedules
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../concepts/results/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    Results
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../concepts/artifacts/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    Artifacts
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../concepts/states/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    States
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../concepts/blocks/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    Blocks
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../concepts/task-runners/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    Task Runners
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../concepts/events/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    Events
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../concepts/automations/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    Automations
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
    
      
        
      
        
      
        
      
        
      
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_14" >
        
          
          <label class="md-nav__link" for="__nav_4_14" id="__nav_4_14_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    
  
    Block and Agent-Based Deployments
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_14_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_14">
            <span class="md-nav__icon md-icon"></span>
            
  
    Block and Agent-Based Deployments
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../concepts/deployments-block-based/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    Deployments
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../concepts/infrastructure/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    Infrastructure
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../concepts/storage/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    Storage
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../concepts/agents/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    Agents
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../cloud/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    
  
    Cloud
  

    
  </span>
  
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_5" id="__nav_5_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            
  
    Cloud
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../cloud/workspaces/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    Workspaces
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_3" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../cloud/users/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    
  
    Users
  

    
  </span>
  
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_5_3" id="__nav_5_3_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_5_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_3">
            <span class="md-nav__icon md-icon"></span>
            
  
    Users
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../cloud/users/roles/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    Roles (RBAC)
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../cloud/users/api-keys/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    API Keys
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../cloud/users/service-accounts/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    Service Accounts
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../cloud/users/sso/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    Single Sign-On (SSO)
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../cloud/users/audit-log/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    Audit Log
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../cloud/users/object-access-control-lists/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    Object-Level Access Control Lists
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../cloud/users/teams/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    Teams
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../cloud/rate-limits/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    API Rate Limits
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../cloud/connecting/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    Connecting & Troubleshooting
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
    
    
      
        
          
        
      
        
      
        
      
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../integrations/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    
  
    Integrations
  

    
  </span>
  
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_6" id="__nav_6_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6">
            <span class="md-nav__icon md-icon"></span>
            
  
    Integrations
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../integrations/usage/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    Using Integrations
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../integrations/contribute/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    Contributing Integrations
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_7" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../api-ref/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    
  
    API Reference
  

    
  </span>
  
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_7" id="__nav_7_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_7_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_7">
            <span class="md-nav__icon md-icon"></span>
            
  
    API Reference
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_7_2" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../api-ref/python/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    
  
    Python SDK
  

    
  </span>
  
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_7_2" id="__nav_7_2_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_7_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_7_2">
            <span class="md-nav__icon md-icon"></span>
            
  
    Python SDK
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../api-ref/prefect/agent/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    prefect.agent
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../api-ref/prefect/artifacts/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    prefect.artifacts
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../api-ref/prefect/context/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    prefect.context
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../api-ref/prefect/engine/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    prefect.engine
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../api-ref/prefect/exceptions/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    prefect.exceptions
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../api-ref/prefect/filesystems/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    prefect.filesystems
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../api-ref/prefect/flows/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    prefect.flows
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../api-ref/prefect/futures/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    prefect.futures
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../api-ref/prefect/infrastructure/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    prefect.infrastructure
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../api-ref/prefect/logging/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    prefect.logging
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_7_2_12" >
        
          
          <label class="md-nav__link" for="__nav_7_2_12" id="__nav_7_2_12_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    
  
    prefect.deployments
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_7_2_12_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_7_2_12">
            <span class="md-nav__icon md-icon"></span>
            
  
    prefect.deployments
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../api-ref/prefect/deployments/deployments/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    deployments
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../api-ref/prefect/deployments/base/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    base
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../api-ref/prefect/deployments/runner/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    runner
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../api-ref/prefect/deployments/steps/core/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    steps.core
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../api-ref/prefect/deployments/steps/pull/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    steps.pull
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../api-ref/prefect/deployments/steps/utility/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    steps.utility
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../api-ref/prefect/runner/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    prefect.runner
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
    
      
        
      
        
      
        
      
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_7_2_14" >
        
          
          <label class="md-nav__link" for="__nav_7_2_14" id="__nav_7_2_14_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    
  
    prefect.runtime
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_7_2_14_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_7_2_14">
            <span class="md-nav__icon md-icon"></span>
            
  
    prefect.runtime
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../api-ref/prefect/runtime/flow_run/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    flow_run
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../api-ref/prefect/runtime/deployment/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    deployment
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../api-ref/prefect/runtime/task_run/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    task_run
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../api-ref/prefect/serializers/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    prefect.serializers
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../api-ref/prefect/settings/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    prefect.settings
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../api-ref/prefect/states/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    prefect.states
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../api-ref/prefect/task-runners/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    prefect.task_runners
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../api-ref/prefect/tasks/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    prefect.tasks
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_7_2_20" >
        
          
          <label class="md-nav__link" for="__nav_7_2_20" id="__nav_7_2_20_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    
  
    prefect.blocks
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_7_2_20_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_7_2_20">
            <span class="md-nav__icon md-icon"></span>
            
  
    prefect.blocks
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../api-ref/prefect/blocks/core/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    core
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../api-ref/prefect/blocks/kubernetes/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    kubernetes
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../api-ref/prefect/blocks/notifications/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    notifications
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../api-ref/prefect/blocks/system/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    system
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../api-ref/prefect/blocks/webhook/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    webhook
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_7_2_21" >
        
          
          <label class="md-nav__link" for="__nav_7_2_21" id="__nav_7_2_21_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    
  
    prefect.client
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_7_2_21_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_7_2_21">
            <span class="md-nav__icon md-icon"></span>
            
  
    prefect.client
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../api-ref/prefect/client/base/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    base
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../api-ref/prefect/client/cloud/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    cloud
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../api-ref/prefect/client/orchestration/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    orchestration
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../api-ref/prefect/client/schemas/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    schemas
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../api-ref/prefect/client/utilities/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    utilities
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_7_2_22" >
        
          
          <label class="md-nav__link" for="__nav_7_2_22" id="__nav_7_2_22_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    
  
    prefect.cli
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_7_2_22_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_7_2_22">
            <span class="md-nav__icon md-icon"></span>
            
  
    prefect.cli
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../api-ref/prefect/cli/agent/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    agent
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../api-ref/prefect/cli/artifact/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    artifact
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../api-ref/prefect/cli/block/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    block
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../api-ref/prefect/cli/cloud/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    cloud
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../api-ref/prefect/cli/concurrency_limit/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    concurrency_limit
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../api-ref/prefect/cli/config/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    config
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../api-ref/prefect/cli/deploy/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    deploy
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../api-ref/prefect/cli/deployment/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    deployment
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../api-ref/prefect/cli/dev/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    dev
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../api-ref/prefect/cli/flow/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    flow
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../api-ref/prefect/cli/flow_run/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    flow_run
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../api-ref/prefect/cli/kubernetes/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    kubernetes
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../api-ref/prefect/cli/profile/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    profile
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../api-ref/prefect/cli/project/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    project
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../api-ref/prefect/cli/root/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    root
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../api-ref/prefect/cli/server/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    server
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../api-ref/prefect/cli/variable/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    variable
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../api-ref/prefect/cli/work_pool/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    work_pool
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../api-ref/prefect/cli/work_queue/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    work_queue
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../api-ref/prefect/cli/worker/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    worker
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_7_2_23" >
        
          
          <label class="md-nav__link" for="__nav_7_2_23" id="__nav_7_2_23_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    
  
    prefect.utilities
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_7_2_23_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_7_2_23">
            <span class="md-nav__icon md-icon"></span>
            
  
    prefect.utilities
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../api-ref/prefect/utilities/annotations/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    annotations
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../api-ref/prefect/utilities/asyncutils/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    asyncutils
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../api-ref/prefect/utilities/processutils/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    processutils
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../api-ref/prefect/utilities/callables/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    callables
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../api-ref/prefect/utilities/collections/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    collections
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../api-ref/prefect/utilities/filesystem/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    filesystem
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../api-ref/prefect/utilities/hashing/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    hashing
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
    
    
      
        
      
        
      
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_7_2_24" >
        
          
          <label class="md-nav__link" for="__nav_7_2_24" id="__nav_7_2_24_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    
  
    prefect.workers
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_7_2_24_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_7_2_24">
            <span class="md-nav__icon md-icon"></span>
            
  
    prefect.workers
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../api-ref/prefect/workers/base/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    base
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../api-ref/prefect/workers/process/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    process
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
    
    
      
        
          
        
      
        
      
        
      
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_7_3" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../api-ref/rest-api/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    
  
    REST API
  

    
  </span>
  
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_7_3" id="__nav_7_3_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_7_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_7_3">
            <span class="md-nav__icon md-icon"></span>
            
  
    REST API
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="https://app.prefect.cloud/api/docs" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    Prefect Cloud REST API Reference
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../api-ref/rest-api-reference/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    Prefect Server REST API Reference
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_7_4" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../api-ref/server/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    
  
    Server API
  

    
  </span>
  
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_7_4" id="__nav_7_4_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_7_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_7_4">
            <span class="md-nav__icon md-icon"></span>
            
  
    Server API
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_7_4_2" >
        
          
          <label class="md-nav__link" for="__nav_7_4_2" id="__nav_7_4_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    
  
    API
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_7_4_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_7_4_2">
            <span class="md-nav__icon md-icon"></span>
            
  
    API
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../api-ref/server/api/admin/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    server.api.admin
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../api-ref/server/api/dependencies/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    server.api.dependencies
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../api-ref/server/api/deployments/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    server.api.deployments
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../api-ref/server/api/flows/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    server.api.flows
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../api-ref/server/api/flow_runs/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    server.api.flow_runs
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../api-ref/server/api/flow_run_states/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    server.api.flow_run_states
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../api-ref/server/api/run_history/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    server.api.run_history
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../api-ref/server/api/saved_searches/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    server.api.saved_searches
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../api-ref/server/api/server/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    server.api.server
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../api-ref/server/api/task_runs/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    server.api.task_runs
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../api-ref/server/api/task_run_states/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    server.api.task_run_states
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_7_4_3" >
        
          
          <label class="md-nav__link" for="__nav_7_4_3" id="__nav_7_4_3_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    
  
    Models
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_7_4_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_7_4_3">
            <span class="md-nav__icon md-icon"></span>
            
  
    Models
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../api-ref/server/models/flows/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    server.models.flows
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../api-ref/server/models/flow_runs/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    server.models.flow_runs
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../api-ref/server/models/flow_run_states/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    server.models.flow_run_states
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../api-ref/server/models/task_runs/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    server.models.task_runs
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../api-ref/server/models/task_run_states/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    server.models.task_run_states
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../api-ref/server/models/deployments/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    server.models.deployments
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../api-ref/server/models/saved_searches/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    server.models.saved_searches
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
    
    
      
        
      
        
      
        
      
        
      
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_7_4_4" >
        
          
          <label class="md-nav__link" for="__nav_7_4_4" id="__nav_7_4_4_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    
  
    Orchestration
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_7_4_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_7_4_4">
            <span class="md-nav__icon md-icon"></span>
            
  
    Orchestration
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../api-ref/server/orchestration/rules/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    server.orchestration.rules
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../api-ref/server/orchestration/policies/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    server.orchestration.policies
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../api-ref/server/orchestration/core_policy/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    server.orchestration.core_policy
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../api-ref/server/orchestration/global_policy/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    server.orchestration.global_policy
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_7_4_5" >
        
          
          <label class="md-nav__link" for="__nav_7_4_5" id="__nav_7_4_5_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    
  
    Schemas
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_7_4_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_7_4_5">
            <span class="md-nav__icon md-icon"></span>
            
  
    Schemas
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../api-ref/server/schemas/actions/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    server.schemas.actions
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../api-ref/server/schemas/core/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    server.schemas.core
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../api-ref/server/schemas/filters/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    server.schemas.filters
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../api-ref/server/schemas/responses/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    server.schemas.responses
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../api-ref/server/schemas/schedules/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    server.schemas.schedules
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../api-ref/server/schemas/sorting/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    server.schemas.sorting
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../api-ref/server/schemas/states/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    server.schemas.states
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
    
    
      
        
      
        
      
        
      
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_7_4_6" >
        
          
          <label class="md-nav__link" for="__nav_7_4_6" id="__nav_7_4_6_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    
  
    Services
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_7_4_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_7_4_6">
            <span class="md-nav__icon md-icon"></span>
            
  
    Services
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../api-ref/server/services/late_runs/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    server.services.late_runs
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../api-ref/server/services/loop_service/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    server.services.loop_service
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../api-ref/server/services/scheduler/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    server.services.scheduler
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
    
    
      
        
      
        
      
        
      
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_7_4_7" >
        
          
          <label class="md-nav__link" for="__nav_7_4_7" id="__nav_7_4_7_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    
  
    Utilities
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_7_4_7_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_7_4_7">
            <span class="md-nav__icon md-icon"></span>
            
  
    Utilities
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../api-ref/server/utilities/database/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    server.utilities.database
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../api-ref/server/utilities/schemas/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    server.utilities.schemas
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../api-ref/server/utilities/server/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    server.utilities.server
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_8" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../community/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    
  
    Community
  

    
  </span>
  
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_8" id="__nav_8_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_8_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_8">
            <span class="md-nav__icon md-icon"></span>
            
  
    Community
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../contributing/overview/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    Contributing
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../contributing/style/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    Style
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../contributing/versioning/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    Versioning
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#work-pool-based-deployments" class="md-nav__link">
    <span class="md-ellipsis">
      
        <span class="md-typeset">
          Work pool-based deployments
        </span>
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#creating-work-pool-based-deployments" class="md-nav__link">
    <span class="md-ellipsis">
      
        <span class="md-typeset">
          Creating work pool-based deployments
        </span>
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Creating work pool-based deployments">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#automatically-bake-your-code-into-a-docker-image" class="md-nav__link">
    <span class="md-ellipsis">
      
        <span class="md-typeset">
          Automatically bake your code into a Docker image
        </span>
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#automatically-build-a-custom-docker-image-with-a-local-dockerfile" class="md-nav__link">
    <span class="md-ellipsis">
      
        <span class="md-typeset">
          Automatically build a custom Docker image with a local Dockerfile
        </span>
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#store-you-code-in-git-based-cloud-storage" class="md-nav__link">
    <span class="md-ellipsis">
      
        <span class="md-typeset">
          Store you code in git-based cloud storage
        </span>
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#store-your-code-in-cloud-provider-storage" class="md-nav__link">
    <span class="md-ellipsis">
      
        <span class="md-typeset">
          Store your code in cloud provider storage
        </span>
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#additional-configuration-with-deploy" class="md-nav__link">
    <span class="md-ellipsis">
      
        <span class="md-typeset">
          Additional configuration with <code>.deploy</code>
        </span>
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#deployment-actions" class="md-nav__link">
    <span class="md-ellipsis">
      
        <span class="md-typeset">
          Deployment actions
        </span>
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#the-build-action" class="md-nav__link">
    <span class="md-ellipsis">
      
        <span class="md-typeset">
          The build action
        </span>
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#the-push-action" class="md-nav__link">
    <span class="md-ellipsis">
      
        <span class="md-typeset">
          The push action
        </span>
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#the-pull-action" class="md-nav__link">
    <span class="md-ellipsis">
      
        <span class="md-typeset">
          The pull action
        </span>
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#utility-steps" class="md-nav__link">
    <span class="md-ellipsis">
      
        <span class="md-typeset">
          Utility steps
        </span>
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#templating-options" class="md-nav__link">
    <span class="md-ellipsis">
      
        <span class="md-typeset">
          Templating options
        </span>
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#deployment-configurations" class="md-nav__link">
    <span class="md-ellipsis">
      
        <span class="md-typeset">
          Deployment Configurations
        </span>
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#working-with-multiple-deployments" class="md-nav__link">
    <span class="md-ellipsis">
      
        <span class="md-typeset">
          Working with multiple deployments
        </span>
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#reusing-configuration-across-deployments" class="md-nav__link">
    <span class="md-ellipsis">
      
        <span class="md-typeset">
          Reusing configuration across deployments
        </span>
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#deployment-declaration-reference" class="md-nav__link">
    <span class="md-ellipsis">
      
        <span class="md-typeset">
          Deployment declaration reference
        </span>
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Deployment declaration reference">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#deployment-fields" class="md-nav__link">
    <span class="md-ellipsis">
      
        <span class="md-typeset">
          Deployment fields
        </span>
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#schedule-fields" class="md-nav__link">
    <span class="md-ellipsis">
      
        <span class="md-typeset">
          Schedule fields
        </span>
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#work-pool-fields" class="md-nav__link">
    <span class="md-ellipsis">
      
        <span class="md-typeset">
          Work pool fields
        </span>
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#deployment-mechanics" class="md-nav__link">
    <span class="md-ellipsis">
      
        <span class="md-typeset">
          Deployment mechanics
        </span>
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#next-steps" class="md-nav__link">
    <span class="md-ellipsis">
      
        <span class="md-typeset">
          Next steps
        </span>
      
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              
                




  <nav class="md-path" aria-label="Navigation" >
    <ol class="md-path__list">
      
      
        
  
    
    
      <li class="md-path__item">
        <a href="../" class="md-path__link">
          
  <span class="md-ellipsis">
    How-to Guides
  </span>

        </a>
      </li>
    
  

      
        
  
    
    
      <li class="md-path__item">
        <a href="./" class="md-path__link">
          
  <span class="md-ellipsis">
    Work Pools
  </span>

        </a>
      </li>
    
  

      
    </ol>
  </nav>

              
              <article class="md-content__inner md-typeset">
                
                  

  
    <a href="https://github.com/PrefectHQ/prefect/edit/main/docs/guides/prefect-deploy.md" title="Edit this page" class="md-content__button md-icon">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25Z"/></svg>
    </a>
  
  


<h1 id="deploying-flows-to-work-pools-and-workers">Deploying Flows to Work Pools and Workers<a class="headerlink" href="#deploying-flows-to-work-pools-and-workers" title="Permanent link">&para;</a></h1>
<p>In this guide, we will configure a deployment that uses a work pool for for dynamically provisioned infrastructure.</p>
<p>All Prefect flow runs are tracked by the API. The API does not require prior registration of flows.
With Prefect, you can call a flow locally or on a remote environment and it will be tracked.</p>
<p>A deployment turns your workflow into an application that can be interacted with and managed via the Prefect API. A deployment enables you to:</p>
<ul>
<li>Schedule flow runs.</li>
<li>Specify event triggers for flow runs.</li>
<li>Assign one or more tags to organize your deployments and flow runs. You can use those tags as filters in the Prefect UI.</li>
<li>Assign custom parameter values for flow runs based on the deployment.</li>
<li>Create ad-hoc flow runs from the API or Prefect UI.</li>
<li>Upload flow files to a defined storage location for retrieval at run time.</li>
</ul>
<div class="admonition note">
<p class="admonition-title">Deployments created with <code>.serve</code></p>
<p>A deployment created with the Python <code>flow.serve</code> method or the <code>serve</code> function runs flows in a subprocess on the same machine where the deployment is created. It does not use a work pool or worker.</p>
</div>
<h2 id="work-pool-based-deployments">Work pool-based deployments<a class="headerlink" href="#work-pool-based-deployments" title="Permanent link">&para;</a></h2>
<p>A work pool-based deployment is useful when you want to dynamically scale the infrastructure where your flow code runs.
Work pool-based deployments contain information about the infrastructure type and configuration for your workflow execution.</p>
<p>Work pool-based deployment infrastructure options include the following:</p>
<ul>
<li>Process - runs flow in a subprocess. Generally better off using <code>.serve</code></li>
<li><a href="/guides/deployment/docker/">Docker</a> - runs flows in an ephemeral Docker container.</li>
<li><a href="/guides/deployment/kubernetes/">Kubernetes</a> - runs flows as a Kubernetes Job.</li>
</ul>
<!-- - [Serverless Cloud Provider options] TK - Jeff PR in progress, awaiting ACI PR in progress - runs flows in a Docker container in a serverless cloud provider environment, such as AWS ECS, Azure Container Instance, Google Cloud Run, or Vertex AI. -->

<p>Work pool-based deployments also allow you to assign a work queue name to prioritize work and allow you to limit concurrent runs at the work pool level.</p>
<p>The following diagram provides a high-level overview of the conceptual elements involved in defining a work-pool based deployment that is polled by a worker and executes a flow run based on that deployment.</p>
<pre class="mermaid"><code>%%{
  init: {
    'theme': 'base',
    'themeVariables': {
      'fontSize': '19px'
    }
  }
}%%

flowchart LR
    F("&lt;div style='margin: 5px 10px 5px 5px;'&gt;Flow Code&lt;/div&gt;"):::yellow -.-&gt; A("&lt;div style='margin: 5px 10px 5px 5px;'&gt;Deployment Definition&lt;/div&gt;"):::gold
    subgraph Server ["&lt;div style='width: 150px; text-align: center; margin-top: 5px;'&gt;Prefect API&lt;/div&gt;"]
        D("&lt;div style='margin: 5px 10px 5px 5px;'&gt;Deployment&lt;/div&gt;"):::green
    end
    subgraph Remote Storage ["&lt;div style='width: 160px; text-align: center; margin-top: 5px;'&gt;Remote Storage&lt;/div&gt;"]
        B("&lt;div style='margin: 5px 6px 5px 5px;'&gt;Flow&lt;/div&gt;"):::yellow
    end
    subgraph Infrastructure ["&lt;div style='width: 150px; text-align: center; margin-top: 5px;'&gt;Infrastructure&lt;/div&gt;"]
        G("&lt;div style='margin: 5px 10px 5px 5px;'&gt;Flow Run&lt;/div&gt;"):::blue
    end

    A --&gt; D
    D --&gt; E("&lt;div style='margin: 5px 10px 5px 5px;'&gt;Worker&lt;/div&gt;"):::red
    B -.-&gt; E
    A -.-&gt; B
    E -.-&gt; G

    classDef gold fill:goldenrod,stroke:goldenrod,stroke-width:4px,color:black
    classDef yellow fill:gold,stroke:gold,stroke-width:4px,color:black
    classDef gray fill:lightgray,stroke:lightgray,stroke-width:4px
    classDef blue fill:blue,stroke:blue,stroke-width:4px,color:white
    classDef green fill:green,stroke:green,stroke-width:4px,color:white
    classDef red fill:red,stroke:red,stroke-width:4px,color:white
    classDef dkgray fill:darkgray,stroke:darkgray,stroke-width:4px,color:white</code></pre>
<p>The work pool types above require a worker to be running on your infrastructure to poll a work pool for scheduled flow runs.</p>
<div class="admonition note">
<p class="admonition-title">Additional work pool options available with Prefect Cloud</p>
<p>Prefect Cloud offers other flavors of work pools that don't require a worker:</p>
<ul>
<li><a href="/guides/deployment/push-work-pools">Push Work Pools</a> - serverless cloud options that don't require a worker because Prefect Cloud submits them to your cloud provider on your behalf.</li>
</ul>
<!-- - <a href="">Managed Execution</a> TK - Prefect Cloud submits and runs your deployment on serverless infrastructure TK - Jake PR in progress -->
</div>
<p>In this guide, we focus on deployments that require a worker.</p>
<p>When creating a deployment that uses a work pool, we must answer <em>two</em> basic questions:</p>
<ul>
<li>What instructions does a <a href="/concepts/work-pools/">worker</a> need to set up an execution environment for our flow? For example, a flow may have Python package requirements, unique Kubernetes settings, or Docker networking configuration.</li>
<li>How should the flow code be accessed?</li>
</ul>
<h2 id="creating-work-pool-based-deployments">Creating work pool-based deployments<a class="headerlink" href="#creating-work-pool-based-deployments" title="Permanent link">&para;</a></h2>
<p>The <a href="/tutorial/deployments/">tutorial</a> shows how you can create a deployment with a long-running process using <code>.serve</code> and how to move to a <a href="/tutorial/workers/">work-pool-based deployment</a> setup with <code>.deploy</code>.
See the discussion of when you might want to move to work-pool-based deployments <a href="/tutorial/workers/#why-workers-and-work-pools">there</a>.</p>
<p>In this guide, we will explore how to use <code>.deploy</code> in more depth and discuss <code>prefect.yaml</code>, a YAML-based alternative for managing deployments.</p>
<p>Use the tabs below to explore both deployment creation options.</p>
<div class="tabbed-set tabbed-alternate" data-tabs="1:2"><input checked="checked" id="__tabbed_1_1" name="__tabbed_1" type="radio" /><input id="__tabbed_1_2" name="__tabbed_1" type="radio" /><div class="tabbed-labels"><label for="__tabbed_1_1">.deploy</label><label for="__tabbed_1_2">prefect.yaml</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<h3 id="automatically-bake-your-code-into-a-docker-image">Automatically bake your code into a Docker image<a class="headerlink" href="#automatically-bake-your-code-into-a-docker-image" title="Permanent link">&para;</a></h3>
<p>You can create a deployment from Python code by calling the <code>.deploy</code> method on a flow.</p>
<div class="highlight"><span class="filename">buy.py</span><pre><span></span><code><span class="kn">from</span> <span class="nn">prefect</span> <span class="kn">import</span> <span class="n">flow</span>


<span class="nd">@flow</span><span class="p">(</span><span class="n">log_prints</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">buy</span><span class="p">():</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Buying securities&quot;</span><span class="p">)</span>


<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s2">&quot;__main__&quot;</span><span class="p">:</span>
    <span class="n">buy</span><span class="o">.</span><span class="n">deploy</span><span class="p">(</span>
        <span class="n">name</span><span class="o">=</span><span class="s2">&quot;my-code-baked-into-an-image-deployment&quot;</span><span class="p">,</span> 
        <span class="n">work_pool_name</span><span class="o">=</span><span class="s2">&quot;my-docker-pool&quot;</span><span class="p">,</span> 
        <span class="n">image</span><span class="o">=</span><span class="s2">&quot;my_registry/my_image:my_image_tag&quot;</span>
    <span class="p">)</span>
</code></pre></div>
<p>Make sure you have the <a href="/concepts/work-pools/">work pool</a> created in the Prefect Cloud workspace you are authenticated to or on your running self-hosted server instance.<br />
Then run the script to create a deployment (in future examples this step will be omitted for brevity):</p>
<p><div class="terminal">
<div class="highlight"><pre><span></span><code>python<span class="w"> </span>buy.py
</code></pre></div>
</div></p>
<p>You should see messages in your terminal that Docker is building your image.
When the deployment build succeeds you will see helpful information in your terminal showing you how to start a worker for your deployment and how to run your deployment.
Your deployment will be visible on the <code>Deployments</code> page in the UI.</p>
<p>By default, <code>.deploy</code> will build a Docker image with your flow code baked into it and push the image to the <a href="https://hub.docker.com/">Docker Hub</a> registry specified in the <code>image</code> argument`. </p>
<div class="admonition note">
<p class="admonition-title">Authentication to Docker Hub</p>
<p>You need your environment to be authenticated to your Docker registry to push an image to it.</p>
</div>
<p>You can specify a registry other than Docker Hub by providing the full registry path in the <code>image</code> argument.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>If building a Docker image, the environment in which you are creating the deployment needs to have Docker installed and running.</p>
</div>
<p>To avoid pushing to a registry, set <code>push=False</code> in the <code>.deploy</code> method.</p>
<div class="highlight"><pre><span></span><code><span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s2">&quot;__main__&quot;</span><span class="p">:</span>
    <span class="n">buy</span><span class="o">.</span><span class="n">deploy</span><span class="p">(</span>
        <span class="n">name</span><span class="o">=</span><span class="s2">&quot;my-code-baked-into-an-image-deployment&quot;</span><span class="p">,</span> 
        <span class="n">work_pool_name</span><span class="o">=</span><span class="s2">&quot;my-docker-pool&quot;</span><span class="p">,</span> 
        <span class="n">image</span><span class="o">=</span><span class="s2">&quot;my_registry/my_image:my_image_tag&quot;</span><span class="p">,</span>
<span class="hll">        <span class="n">push</span><span class="o">=</span><span class="kc">False</span>
</span>    <span class="p">)</span>
</code></pre></div>
<p>To avoid building an image, set <code>build=False</code> in the <code>.deploy</code> method.</p>
<div class="highlight"><pre><span></span><code><span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s2">&quot;__main__&quot;</span><span class="p">:</span>
    <span class="n">buy</span><span class="o">.</span><span class="n">deploy</span><span class="p">(</span>
        <span class="n">name</span><span class="o">=</span><span class="s2">&quot;my-code-baked-into-an-image-deployment&quot;</span><span class="p">,</span> 
        <span class="n">work_pool_name</span><span class="o">=</span><span class="s2">&quot;my-docker-pool&quot;</span><span class="p">,</span> 
        <span class="n">image</span><span class="o">=</span><span class="s2">&quot;discdiver/no-build-image:1.0&quot;</span><span class="p">,</span>
<span class="hll">        <span class="n">build</span><span class="o">=</span><span class="kc">False</span>
</span>    <span class="p">)</span>
</code></pre></div>
<p>The specified image will need to be available in your deployment's execution environment for your flow code to be accessible.</p>
<p>Prefect generates a Dockerfile for you that will build an image based off of one of Prefect's published images. The generated Dockerfile will copy the current directory into the Docker image and install any dependencies listed in a <code>requirements.txt</code> file.</p>
<h3 id="automatically-build-a-custom-docker-image-with-a-local-dockerfile">Automatically build a custom Docker image with a local Dockerfile<a class="headerlink" href="#automatically-build-a-custom-docker-image-with-a-local-dockerfile" title="Permanent link">&para;</a></h3>
<p>If you want to use a custom Dockerfile, you can specify the path to the Dockerfile with the <code>DeploymentImage</code> class:</p>
<div class="highlight"><span class="filename">custom_dockerfile.py</span><pre><span></span><code><span class="kn">from</span> <span class="nn">prefect</span> <span class="kn">import</span> <span class="n">flow</span>
<span class="kn">from</span> <span class="nn">prefect.deployments</span> <span class="kn">import</span> <span class="n">DeploymentImage</span>


<span class="nd">@flow</span><span class="p">(</span><span class="n">log_prints</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">buy</span><span class="p">():</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Selling securities&quot;</span><span class="p">)</span>


<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s2">&quot;__main__&quot;</span><span class="p">:</span>
    <span class="n">buy</span><span class="o">.</span><span class="n">deploy</span><span class="p">(</span>
        <span class="n">name</span><span class="o">=</span><span class="s2">&quot;my-custom-dockerfile-deployment&quot;</span><span class="p">,</span><span class="s2">&quot;, </span>
        <span class="n">work_pool_name</span><span class="o">=</span><span class="s2">&quot;my-docker-pool&quot;</span><span class="p">,</span> 
<span class="hll">        <span class="n">image</span><span class="o">=</span><span class="n">DeploymentImage</span><span class="p">(</span>
</span><span class="hll">            <span class="n">name</span><span class="o">=</span><span class="s2">&quot;my_image&quot;</span><span class="p">,</span>
</span><span class="hll">            <span class="n">tag</span><span class="o">=</span><span class="s2">&quot;deploy-guide&quot;</span><span class="p">,</span>
</span><span class="hll">            <span class="n">dockerfile</span><span class="o">=</span><span class="s2">&quot;Dockerfile&quot;</span>
</span>    <span class="p">),</span>
    <span class="n">push</span><span class="o">=</span><span class="kc">False</span>
<span class="p">)</span>
</code></pre></div>
<p>The <code>DeploymentImage</code> object allows for a great deal of image customization.</p>
<p>For example, you can install a private Python package from GCP's artifact registry like this:</p>
<p>Create a custom base Dockerfile.</p>
<div class="highlight"><pre><span></span><code>FROM python:3.10

ARG AUTHED_ARTIFACT_REG_URL
COPY ./requirements.txt /requirements.txt

RUN pip install --extra-index-url ${AUTHED_ARTIFACT_REG_URL} -r /requirements.txt
</code></pre></div>
<p>Create our deployment by leveraging the DeploymentImage class. </p>
<div class="highlight"><span class="filename">private-package.py</span><pre><span></span><code><span class="kn">from</span> <span class="nn">prefect</span> <span class="kn">import</span> <span class="n">flow</span>
<span class="hll"><span class="kn">from</span> <span class="nn">prefect.deployments.runner</span> <span class="kn">import</span> <span class="n">DeploymentImage</span>
</span><span class="kn">from</span> <span class="nn">prefect.blocks.system</span> <span class="kn">import</span> <span class="n">Secret</span>
<span class="kn">from</span> <span class="nn">my_private_package</span> <span class="kn">import</span> <span class="n">do_something_cool</span>


<span class="nd">@flow</span><span class="p">(</span><span class="n">log_prints</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">my_flow</span><span class="p">():</span>
    <span class="n">do_something_cool</span><span class="p">()</span>


<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s2">&quot;__main__&quot;</span><span class="p">:</span>
    <span class="n">artifact_reg_url</span><span class="p">:</span> <span class="n">Secret</span> <span class="o">=</span> <span class="n">Secret</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="s2">&quot;artifact-reg-url&quot;</span><span class="p">)</span>

    <span class="n">my_flow</span><span class="o">.</span><span class="n">deploy</span><span class="p">(</span>
        <span class="n">name</span><span class="o">=</span><span class="s2">&quot;my-deployment&quot;</span><span class="p">,</span>
        <span class="n">work_pool_name</span><span class="o">=</span><span class="s2">&quot;k8s-demo&quot;</span><span class="p">,</span>
<span class="hll">        <span class="n">image</span><span class="o">=</span><span class="n">DeploymentImage</span><span class="p">(</span>
</span><span class="hll">            <span class="n">name</span><span class="o">=</span><span class="s2">&quot;my-image&quot;</span><span class="p">,</span>
</span><span class="hll">            <span class="n">tag</span><span class="o">=</span><span class="s2">&quot;test&quot;</span><span class="p">,</span>
</span><span class="hll">            <span class="n">dockerfile</span><span class="o">=</span><span class="s2">&quot;Dockerfile&quot;</span><span class="p">,</span>
</span><span class="hll">            <span class="n">buildargs</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;AUTHED_ARTIFACT_REG_URL&quot;</span><span class="p">:</span> <span class="n">artifact_reg_url</span><span class="o">.</span><span class="n">get</span><span class="p">()},</span>
</span>        <span class="p">),</span>
    <span class="p">)</span>
</code></pre></div>
<p>Note that we used a <a href="/concepts/blocks/">Prefect Secret block</a> to load the URL configuration for the artifact registry above.</p>
<p>See all the optional keyword arguments for the DeploymentImage class <a href="https://docker-py.readthedocs.io/en/stable/images.html#docker.models.images.ImageCollection.build">here</a>. </p>
<div class="admonition tip">
<p class="admonition-title">Default Docker namespace</p>
<p>You can set the <code>PREFECT_DEFAULT_DOCKER_BUILD_NAMESPACE</code> setting to append a default Docker namespace to all images you build with <code>.deploy</code>. This is great if you use a private registry to store your images.</p>
<p>To set a default Docker namespace for your current profile run:</p>
<p><div class="terminal">
<div class="highlight"><pre><span></span><code>prefect<span class="w"> </span>config<span class="w"> </span><span class="nb">set</span><span class="w"> </span><span class="nv">PREFECT_DEFAULT_DOCKER_BUILD_NAMESPACE</span><span class="o">=</span>&lt;docker-registry-url&gt;/&lt;organization-or-username&gt;
</code></pre></div>
</div></p>
<p>Once set, you can omit the namespace from your image name when creating a deployment:</p>
<div class="highlight"><span class="filename">with_default_docker_namespace.py</span><pre><span></span><code><span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s2">&quot;__main__&quot;</span><span class="p">:</span>
    <span class="n">buy</span><span class="o">.</span><span class="n">deploy</span><span class="p">(</span>
        <span class="n">name</span><span class="o">=</span><span class="s2">&quot;my-code-baked-into-an-image-deployment&quot;</span><span class="p">,</span> 
        <span class="n">work_pool_name</span><span class="o">=</span><span class="s2">&quot;my-docker-pool&quot;</span><span class="p">,</span> 
<span class="hll">        <span class="n">image</span><span class="o">=</span><span class="s2">&quot;my_image:my_image_tag&quot;</span>
</span>    <span class="p">)</span>
</code></pre></div>
<p>The above code will build an image with the format <code>&lt;docker-registry-url&gt;/&lt;organization-or-username&gt;/my_image:my_image_tag</code> when <code>PREFECT_DEFAULT_DOCKER_BUILD_NAMESPACE</code> is set.</p>
</div>
<p>While baking code into Docker images is a popular deployment option, many teams decide to store their workflow code in git-based storage, such as GitHub, Bitbucket, or Gitlab. Let's see how to do that next.</p>
<h3 id="store-you-code-in-git-based-cloud-storage">Store you code in git-based cloud storage<a class="headerlink" href="#store-you-code-in-git-based-cloud-storage" title="Permanent link">&para;</a></h3>
<p>If you don't specify an <code>image</code> argument for <code>.deploy</code>, then you need to specify where to pull the flow code from at runtime with the <code>from_source</code> method. </p>
<p>Here's how we can pull our flow code from a GitHub repository.</p>
<div class="highlight"><span class="filename">git_storage.py</span><pre><span></span><code><span class="kn">from</span> <span class="nn">prefect</span> <span class="kn">import</span> <span class="n">flow</span>

<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s2">&quot;__main__&quot;</span><span class="p">:</span>
<span class="hll">    <span class="n">flow</span><span class="o">.</span><span class="n">from_source</span><span class="p">(</span>
</span><span class="hll">        <span class="s2">&quot;https://github.com/my_github_account/my_repo/my_file.git&quot;</span><span class="p">,</span>
</span><span class="hll">        <span class="n">entrypoint</span><span class="o">=</span><span class="s2">&quot;flows/no-image.py:hello_world&quot;</span><span class="p">,</span>
</span>    <span class="p">)</span><span class="o">.</span><span class="n">deploy</span><span class="p">(</span>
        <span class="n">name</span><span class="o">=</span><span class="s2">&quot;no-image-deployment&quot;</span><span class="p">,</span>
        <span class="n">work_pool_name</span><span class="o">=</span><span class="s2">&quot;my_pool&quot;</span><span class="p">,</span>
        <span class="n">build</span><span class="o">=</span><span class="kc">False</span>
    <span class="p">)</span>
</code></pre></div>
<p>The <code>entrypoint</code> is the path to the file the flow is located in and the function name, separated by a colon.</p>
<p>Alternatively, you could specify a git-based cloud storage URL for a Bitbucket or Gitlab repository. </p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If you don't specify an image as part of your deployment creation, the image specified in the work pool will be used to run your flow.</p>
</div>
<p>After creating a deployment you might change your flow code. 
Generally, you can just push your code to GitHub, without rebuilding your deployment. 
The exception is if something that the server needs to know about changes, such as the flow entrypoint parameters. 
Rerunning the Python script with <code>.deploy</code> will update your deployment on the server with the new flow code.</p>
<p>If you want to pull your flow code from private git-based storage,</p>
<p>If you need to provide additional configuration, such as specifying a private repository, you can provide a <a href="/api-ref/prefect/flows/#prefect.runner.storage.GitRepository"><code>GitRepository</code></a> object instead of a URL:</p>
<div class="highlight"><span class="filename">private_git_storage.py</span><pre><span></span><code><span class="kn">from</span> <span class="nn">prefect</span> <span class="kn">import</span> <span class="n">flow</span>
<span class="hll"><span class="kn">from</span> <span class="nn">prefect.runner.storage</span> <span class="kn">import</span> <span class="n">GitRepository</span>
</span><span class="hll"><span class="kn">from</span> <span class="nn">prefect.blocks.system</span> <span class="kn">import</span> <span class="n">Secret</span>
</span>
<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s2">&quot;__main__&quot;</span><span class="p">:</span>
    <span class="n">flow</span><span class="o">.</span><span class="n">from_source</span><span class="p">(</span>
<span class="hll">        <span class="n">source</span><span class="o">=</span><span class="n">GitRepository</span><span class="p">(</span>
</span><span class="hll">        <span class="n">url</span><span class="o">=</span><span class="s2">&quot;https://github.com/org/private-repo.git&quot;</span><span class="p">,</span>
</span><span class="hll">        <span class="n">branch</span><span class="o">=</span><span class="s2">&quot;dev&quot;</span><span class="p">,</span>
</span><span class="hll">        <span class="n">credentials</span><span class="o">=</span><span class="p">{</span>
</span><span class="hll">            <span class="s2">&quot;access_token&quot;</span><span class="p">:</span> <span class="n">Secret</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="s2">&quot;github-access-token&quot;</span><span class="p">)</span>
</span><span class="hll">        <span class="p">}</span>
</span>    <span class="p">),</span>
    <span class="n">entrypoint</span><span class="o">=</span><span class="s2">&quot;flows/no-image.py:hello_world&quot;</span><span class="p">,</span>
    <span class="p">)</span><span class="o">.</span><span class="n">deploy</span><span class="p">(</span>
        <span class="n">name</span><span class="o">=</span><span class="s2">&quot;private-git-storage-deployment&quot;</span><span class="p">,</span>
        <span class="n">work_pool_name</span><span class="o">=</span><span class="s2">&quot;my_pool&quot;</span><span class="p">,</span>
        <span class="n">build</span><span class="o">=</span><span class="kc">False</span>
    <span class="p">)</span>
</code></pre></div>
<p>Note the use of the Secret block to load the GitHub access token. 
Alternatively, you could provide a username and password to the <code>username</code> and <code>password</code> fields of the <code>credentials</code> argument.</p>
<h3 id="store-your-code-in-cloud-provider-storage">Store your code in cloud provider storage<a class="headerlink" href="#store-your-code-in-cloud-provider-storage" title="Permanent link">&para;</a></h3>
<p>Another option for flow code storage is any <a href="https://filesystem-spec.readthedocs.io/en/latest/">fsspec</a>-supported storage location, such as AWS S3, GCP GCS, or Azure Blob Storage.</p>
<p>For example, you can pass the S3 bucket path to <code>source</code>.</p>
<div class="highlight"><span class="filename">s3_storage.py</span><pre><span></span><code><span class="kn">from</span> <span class="nn">prefect</span> <span class="kn">import</span> <span class="n">flow</span>

<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s2">&quot;__main__&quot;</span><span class="p">:</span>
<span class="hll">    <span class="n">flow</span><span class="o">.</span><span class="n">from_source</span><span class="p">(</span>
</span><span class="hll">        <span class="n">source</span><span class="o">=</span><span class="s2">&quot;s3://my-bucket/my-folder&quot;</span><span class="p">,</span>
</span><span class="hll">        <span class="n">entrypoint</span><span class="o">=</span><span class="s2">&quot;flows.py:my_flow&quot;</span><span class="p">,</span>
</span>    <span class="p">)</span><span class="o">.</span><span class="n">deploy</span><span class="p">(</span>
        <span class="n">name</span><span class="o">=</span><span class="s2">&quot;deployment-from-aws-flow&quot;</span><span class="p">,</span>
        <span class="n">work_pool</span><span class="o">=</span><span class="s2">&quot;my_pool&quot;</span><span class="p">,</span>
    <span class="p">)</span>
</code></pre></div>
<p>In the example above your credentials will be auto-discovered from your deployment creation environment and credentials will need to be available in your runtime environment.</p>
<p>If you need additional configuration for your cloud-based storage - for example, with a private S3 Bucket -  we recommend using a <a href="/concepts/blocks/">storage block</a>. 
A storage block also ensures your credentials will be available in both your deployment creation environment and your execution environment.</p>
<p>Here's an example that uses an <code>S3Bucket</code> block from the <a href="https://prefecthq.github.io/prefect-aws/">prefect-aws library</a>.</p>
<div class="highlight"><span class="filename">s3_storage_auth.py</span><pre><span></span><code><span class="kn">from</span> <span class="nn">prefect</span> <span class="kn">import</span> <span class="n">flow</span>
<span class="hll"><span class="kn">from</span> <span class="nn">prefect_aws.s3</span> <span class="kn">import</span> <span class="n">S3Bucket</span>
</span>
<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s2">&quot;__main__&quot;</span><span class="p">:</span>
<span class="hll">    <span class="n">flow</span><span class="o">.</span><span class="n">from_source</span><span class="p">(</span>
</span><span class="hll">        <span class="n">source</span><span class="o">=</span><span class="n">S3Bucket</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="s2">&quot;my-code-storage&quot;</span><span class="p">),</span> <span class="n">entrypoint</span><span class="o">=</span><span class="s2">&quot;my_file.py:my_flow&quot;</span>
</span><span class="hll">    <span class="p">)</span><span class="o">.</span><span class="n">deploy</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;test-s3&quot;</span><span class="p">,</span> <span class="n">work_pool</span><span class="o">=</span><span class="s2">&quot;my_pool&quot;</span><span class="p">)</span>
</span></code></pre></div>
<p>If you are familiar with the deployment creation mechanics with <code>.serve</code>, you will notice that <code>.deploy</code> is very similar. <code>.deploy</code> just requires a work pool name and has a number of parameters dealing with flow-code storage for Docker images. </p>
<p>Unlike <code>.serve</code>, if you don't specify an image to use for your flow, you must to specify where to pull the flow code from at runtime with the <code>from_source</code> method, whereas <code>from_source</code> is optional with <code>.serve</code>.</p>
<h3 id="additional-configuration-with-deploy">Additional configuration with <code>.deploy</code><a class="headerlink" href="#additional-configuration-with-deploy" title="Permanent link">&para;</a></h3>
<p>Our examples thus far have explored options for where to store flow code. 
Let's turn our attention to other deployment configuration options.</p>
<p>To pass parameters to your flow, you can use the <code>parameters</code> argument in the <code>.deploy</code> method. Just pass in a dictionary of key-value pairs.</p>
<div class="highlight"><span class="filename">pass_params.py</span><pre><span></span><code><span class="kn">from</span> <span class="nn">prefect</span> <span class="kn">import</span> <span class="n">flow</span>

<span class="nd">@flow</span>
<span class="k">def</span> <span class="nf">hello_world</span><span class="p">(</span><span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Hello, </span><span class="si">{</span><span class="n">name</span><span class="si">}</span><span class="s2">!&quot;</span><span class="p">)</span>

<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s2">&quot;__main__&quot;</span><span class="p">:</span>
    <span class="n">hello_world</span><span class="o">.</span><span class="n">deploy</span><span class="p">(</span>
        <span class="n">name</span><span class="o">=</span><span class="s2">&quot;pass-params-deployment&quot;</span><span class="p">,</span>
        <span class="n">work_pool_name</span><span class="o">=</span><span class="s2">&quot;my_pool&quot;</span><span class="p">,</span>
<span class="hll">        <span class="n">parameters</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;Prefect&quot;</span><span class="p">),</span>
</span>        <span class="n">image</span><span class="o">=</span><span class="s2">&quot;my_registry/my_image:my_image_tag&quot;</span><span class="p">,</span>
    <span class="p">)</span>
</code></pre></div>
<p>The <code>job_variables</code> parameter allows you to fine-tune the infrastructure settings for a deployment. 
The values passed in override default values in the specified work pool's <a href="/concepts/work-pools/#base-job-template">base job template</a>.</p>
<p>You can override environment variables, such as <code>image_pull_policy</code> and <code>image</code>, for a specific deployment with the <code>job_variables</code> argument. </p>
<div class="highlight"><span class="filename">job_var_image_pull.py</span><pre><span></span><code><span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s2">&quot;__main__&quot;</span><span class="p">:</span>
    <span class="n">get_repo_info</span><span class="o">.</span><span class="n">deploy</span><span class="p">(</span>
        <span class="n">name</span><span class="o">=</span><span class="s2">&quot;my-deployment-never-pull&quot;</span><span class="p">,</span> 
        <span class="n">work_pool_name</span><span class="o">=</span><span class="s2">&quot;my-docker-pool&quot;</span><span class="p">,</span> 
<span class="hll">        <span class="n">job_variables</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;image_pull_policy&quot;</span><span class="p">:</span> <span class="s2">&quot;Never&quot;</span><span class="p">},</span>
</span>        <span class="n">image</span><span class="o">=</span><span class="s2">&quot;my-image:my-tag&quot;&quot;,</span>
        <span class="n">push</span><span class="o">=</span><span class="kc">False</span>
    <span class="p">)</span>
</code></pre></div>
<p>Similarly, you can override the environment variables specified in a work pool through the <code>job_variables</code> parameter:</p>
<div class="highlight"><span class="filename">job_var_env_vars.py</span><pre><span></span><code><span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s2">&quot;__main__&quot;</span><span class="p">:</span>
    <span class="n">get_repo_info</span><span class="o">.</span><span class="n">deploy</span><span class="p">(</span>
        <span class="n">name</span><span class="o">=</span><span class="s2">&quot;my-deployment-never-pull&quot;</span><span class="p">,</span> 
        <span class="n">work_pool_name</span><span class="o">=</span><span class="s2">&quot;my-docker-pool&quot;</span><span class="p">,</span> 
<span class="hll">        <span class="n">job_variables</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;env&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;EXTRA_PIP_PACKAGES&quot;</span><span class="p">:</span> <span class="s2">&quot;boto3&quot;</span><span class="p">}</span> <span class="p">},</span>
</span>        <span class="n">image</span><span class="o">=</span><span class="s2">&quot;my-image:my-tag&quot;&quot;,</span>
        <span class="n">push</span><span class="o">=</span><span class="kc">False</span>
    <span class="p">)</span>
</code></pre></div>
<p>The dictionary key "EXTRA_PIP_PACKAGES" denotes a special environment variable that Prefect will use to install additional Python packages at runtime. 
This approach is an alternative to building an image with a custom <code>requirements.txt</code> copied into it.</p>
</div>
<div class="tabbed-block">
<p>The <code>prefect.yaml</code> file is a YAML file describing base settings for your deployments, procedural steps for preparing deployments, and instructions for preparing the execution environment for a deployment run.</p>
<p>You can initialize your deployment configuration, which creates the <code>prefect.yaml</code> file, by running the CLI command <code>prefect init</code> in any directory or repository that stores your flow code.</p>
<div class="admonition tip">
<p class="admonition-title">Deployment configuration recipes</p>
<p>Prefect ships with many off-the-shelf "recipes" that allow you to get started with more structure within your <code>prefect.yaml</code> file; run <code>prefect init</code> to be prompted with available recipes in your installation. You can provide a recipe name in your initialization command with the <code>--recipe</code> flag, otherwise Prefect will attempt to guess an appropriate recipe based on the structure of your working directory (for example if you initialize within a <code>git</code> repository, Prefect will use the <code>git</code> recipe).</p>
</div>
<p>The <code>prefect.yaml</code> file contains deployment configuration for deployments created from this file, default instructions for how to build and push any necessary code artifacts (such as Docker images), and default instructions for pulling a deployment in remote execution environments (e.g., cloning a GitHub repository).</p>
<p>Any deployment configuration can be overridden via options available on the <code>prefect deploy</code> CLI command when creating a deployment.</p>
<p>The base structure for <code>prefect.yaml</code> is as follows:</p>
<div class="highlight"><pre><span></span><code><span class="c1"># generic metadata</span>
<span class="nt">prefect-version</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">null</span>
<span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">null</span>

<span class="c1"># preparation steps</span>
<span class="nt">build</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">null</span>
<span class="nt">push</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">null</span>

<span class="c1"># runtime steps</span>
<span class="nt">pull</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">null</span>

<span class="c1"># deployment configurations</span>
<span class="nt">deployments</span><span class="p">:</span>
<span class="p p-Indicator">-</span><span class="w"> </span><span class="c1"># base metadata</span>
<span class="w">    </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">null</span>
<span class="w">    </span><span class="nt">version</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">null</span>
<span class="w">    </span><span class="nt">tags</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[]</span>
<span class="w">    </span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">null</span>
<span class="w">    </span><span class="nt">schedule</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">null</span>

<span class="w">    </span><span class="c1"># flow-specific fields</span>
<span class="w">    </span><span class="nt">entrypoint</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">null</span>
<span class="w">    </span><span class="nt">parameters</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{}</span>

<span class="w">    </span><span class="c1"># infra-specific fields</span>
<span class="w">    </span><span class="nt">work_pool</span><span class="p">:</span>
<span class="w">    </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">null</span>
<span class="w">    </span><span class="nt">work_queue_name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">null</span>
<span class="w">    </span><span class="nt">job_variables</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{}</span>
</code></pre></div>
<p>The metadata fields are always pre-populated for you. These fields are for bookkeeping purposes only.  The other sections are pre-populated based on recipe; if no recipe is provided, Prefect will attempt to guess an appropriate one based on local configuration.</p>
<p>You can create deployments via the CLI command <code>prefect deploy</code> without ever needing to alter the <code>deployments</code> section of your <code>prefect.yaml</code> file — the <code>prefect deploy</code> command will help in deployment creation via interactive prompts. The <code>prefect.yaml</code> file facilitates version-controlling your deployment configuration and managing multiple deployments.</p>
<h3 id="deployment-actions">Deployment actions<a class="headerlink" href="#deployment-actions" title="Permanent link">&para;</a></h3>
<p>Deployment actions defined in your <code>prefect.yaml</code> file control the lifecycle of the creation and execution of your deployments.
The three actions available are <code>build</code>, <code>push</code>, and <code>pull</code>.
<code>pull</code> is the only required deployment action — it is used to define how Prefect will pull your deployment in remote execution environments.</p>
<p>Each action is defined as a list of steps that are executing in sequence.</p>
<p>Each step has the following format:</p>
<div class="highlight"><pre><span></span><code><span class="nt">section</span><span class="p">:</span>
<span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">prefect_package.path.to.importable.step</span><span class="p">:</span>
<span class="w">    </span><span class="nt">id</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;step-id&quot;</span><span class="w"> </span><span class="c1"># optional</span>
<span class="w">    </span><span class="nt">requires</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;pip-installable-package-spec&quot;</span><span class="w"> </span><span class="c1"># optional</span>
<span class="w">    </span><span class="nt">kwarg1</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">value</span>
<span class="w">    </span><span class="nt">kwarg2</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">more-values</span>
</code></pre></div>
<p>Every step can optionally provide a <code>requires</code> field that Prefect will use to auto-install in the event that the step cannot be found in the current environment. Each step can also specify an <code>id</code> for the step which is used when referencing step outputs in later steps. The additional fields map directly onto Python keyword arguments to the step function. Within a given section, steps always run in the order that they are provided within the <code>prefect.yaml</code> file.</p>
<div class="admonition tip">
<p class="admonition-title">Deployment Instruction Overrides</p>
<p><code>build</code>, <code>push</code>, and <code>pull</code> sections can all be overridden on a per-deployment basis by defining <code>build</code>, <code>push</code>, and <code>pull</code> fields within a deployment definition in the <code>prefect.yaml</code> file.</p>
<p>The <code>prefect deploy</code> command will use any <code>build</code>, <code>push</code>, or <code>pull</code> instructions provided in a deployment's definition in the <code>prefect.yaml</code> file.</p>
<p>This capability is useful with multiple deployments that require different deployment instructions.</p>
</div>
<h3 id="the-build-action">The build action<a class="headerlink" href="#the-build-action" title="Permanent link">&para;</a></h3>
<p>The build section of <code>prefect.yaml</code> is where any necessary side effects for running your deployments are built - the most common type of side effect produced here is a Docker image. If you initialize with the docker recipe, you will be prompted to provide required information, such as image name and tag:</p>
<p><div class="terminal">
<div class="highlight"><pre><span></span><code>prefect<span class="w"> </span>init<span class="w"> </span>--recipe<span class="w"> </span>docker
&gt;&gt;<span class="w"> </span>image_name:<span class="w"> </span>&lt;<span class="w"> </span>insert<span class="w"> </span>image<span class="w"> </span>name<span class="w"> </span>here<span class="w"> </span>&gt;
&gt;&gt;<span class="w"> </span>tag:<span class="w"> </span>&lt;<span class="w"> </span>insert<span class="w"> </span>image<span class="w"> </span>tag<span class="w"> </span>here<span class="w"> </span>&gt;
</code></pre></div>
</div></p>
<div class="admonition tip">
<p class="admonition-title">Use <code>--field</code> to avoid the interactive experience</p>
<p>We recommend that you only initialize a recipe when you are first creating your deployment structure, and afterwards store your configuration files within version control.
However, sometimes you may need to initialize programmatically and avoid the interactive prompts.<br />
To do so, provide all required fields for your recipe using the <code>--field</code> flag:</p>
<p><div class="terminal">
<div class="highlight"><pre><span></span><code>prefect<span class="w"> </span>init<span class="w"> </span>--recipe<span class="w"> </span>docker<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>--field<span class="w"> </span><span class="nv">image_name</span><span class="o">=</span>my-repo/my-image<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>--field<span class="w"> </span><span class="nv">tag</span><span class="o">=</span>my-tag
</code></pre></div>
</div></p>
</div>
<div class="highlight"><pre><span></span><code><span class="nt">build</span><span class="p">:</span>
<span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">prefect_docker.deployments.steps.build_docker_image</span><span class="p">:</span>
<span class="w">    </span><span class="nt">requires</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">prefect-docker&gt;=0.3.0</span>
<span class="w">    </span><span class="nt">image_name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">my-repo/my-image</span>
<span class="w">    </span><span class="nt">tag</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">my-tag</span>
<span class="w">    </span><span class="nt">dockerfile</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">auto</span>
<span class="w">    </span><span class="nt">push</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
</code></pre></div>
<p>Once you've confirmed that these fields are set to their desired values, this step will automatically build a Docker image with the provided name and tag and push it to the repository referenced by the image name.<br />
<a href="https://prefecthq.github.io/prefect-docker/deployments/steps/#prefect_docker.deployments.steps.BuildDockerImageResult">As the <code>prefect-docker</code> package documentation notes</a>, this step produces a few fields that can optionally be used in future steps or within <code>prefect.yaml</code> as template values.<br />
It is best practice to use <code>{{ image }}</code> within <code>prefect.yaml</code> (specifically the work pool's job variables section) so that you don't risk having your build step and deployment specification get out of sync with hardcoded values.  </p>
<div class="admonition note some steps require prefect integrations">
<p class="admonition-title">Note</p>
<p>Note that in the build step example above, we relied on the <code>prefect-docker</code> package; in cases that deal with external services, additional packages are often required and will be auto-installed for you.</p>
</div>
<div class="admonition tip">
<p class="admonition-title">Pass output to downstream steps</p>
<p>Each deployment action can be composed of multiple steps. For example, if you wanted to build a Docker image tagged with the current commit hash, you could use the <code>run_shell_script</code> step and feed the output into the <code>build_docker_image</code> step:</p>
<div class="highlight"><pre><span></span><code><span class="nt">build</span><span class="p">:</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">prefect.deployments.steps.run_shell_script</span><span class="p">:</span>
<span class="w">        </span><span class="nt">id</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">get-commit-hash</span>
<span class="w">        </span><span class="nt">script</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">git rev-parse --short HEAD</span>
<span class="w">        </span><span class="nt">stream_output</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">false</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">prefect_docker.deployments.steps.build_docker_image</span><span class="p">:</span>
<span class="w">        </span><span class="nt">requires</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">prefect-docker</span>
<span class="w">        </span><span class="nt">image_name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">my-image</span>
<span class="w">        </span><span class="nt">image_tag</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;{{</span><span class="nv"> </span><span class="s">get-commit-hash.stdout</span><span class="nv"> </span><span class="s">}}&quot;</span>
<span class="w">        </span><span class="nt">dockerfile</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">auto</span>
</code></pre></div>
<p>Note that the <code>id</code> field is used in the <code>run_shell_script</code> step so that its output can be referenced in the next step.</p>
</div>
<h3 id="the-push-action">The push action<a class="headerlink" href="#the-push-action" title="Permanent link">&para;</a></h3>
<p>The push section is most critical for situations in which code is not stored on persistent filesystems or in version control.  In this scenario, code is often pushed and pulled from a Cloud storage bucket of some kind (e.g., S3, GCS, Azure Blobs, etc.).  The push section allows users to specify and customize the logic for pushing this code repository to arbitrary remote locations.</p>
<p>For example, a user wishing to store their code in an S3 bucket and rely on default worker settings for its runtime environment could use the <code>s3</code> recipe:</p>
<p><div class="terminal">
<div class="highlight"><pre><span></span><code>prefect<span class="w"> </span>init<span class="w"> </span>--recipe<span class="w"> </span>s3
&gt;&gt;<span class="w"> </span>bucket:<span class="w"> </span>&lt;<span class="w"> </span>insert<span class="w"> </span>bucket<span class="w"> </span>name<span class="w"> </span>here<span class="w"> </span>&gt;
</code></pre></div>
</div></p>
<p>Inspecting our newly created <code>prefect.yaml</code> file we find that the <code>push</code> and <code>pull</code> sections have been templated out for us as follows:</p>
<div class="highlight"><pre><span></span><code><span class="nt">push</span><span class="p">:</span>
<span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">prefect_aws.deployments.steps.push_to_s3</span><span class="p">:</span>
<span class="w">    </span><span class="nt">id</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">push-code</span>
<span class="w">    </span><span class="nt">requires</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">prefect-aws&gt;=0.3.0</span>
<span class="w">    </span><span class="nt">bucket</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">my-bucket</span>
<span class="w">    </span><span class="nt">folder</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">project-name</span>
<span class="w">    </span><span class="nt">credentials</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">null</span>

<span class="nt">pull</span><span class="p">:</span>
<span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">prefect_aws.deployments.steps.pull_from_s3</span><span class="p">:</span>
<span class="w">    </span><span class="nt">requires</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">prefect-aws&gt;=0.3.0</span>
<span class="w">    </span><span class="nt">bucket</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">my-bucket</span>
<span class="w">    </span><span class="nt">folder</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;{{</span><span class="nv"> </span><span class="s">push-code.folder</span><span class="nv"> </span><span class="s">}}&quot;</span>
<span class="w">    </span><span class="nt">credentials</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">null</span>
</code></pre></div>
<p>The bucket has been populated with our provided value (which also could have been provided with the <code>--field</code> flag); note that the <code>folder</code> property of the <code>push</code> step is a template - the <code>pull_from_s3</code> step outputs both a <code>bucket</code> value as well as a <code>folder</code> value that can be used to template downstream steps.  Doing this helps you keep your steps consistent across edits.</p>
<p>As discussed above, if you are using <a href="/concepts/blocks/">blocks</a>, the credentials section can be templated with a block reference for secure and dynamic credentials access:</p>
<div class="highlight"><pre><span></span><code><span class="nt">push</span><span class="p">:</span>
<span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">prefect_aws.deployments.steps.push_to_s3</span><span class="p">:</span>
<span class="w">    </span><span class="nt">requires</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">prefect-aws&gt;=0.3.0</span>
<span class="w">    </span><span class="nt">bucket</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">my-bucket</span>
<span class="w">    </span><span class="nt">folder</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">project-name</span>
<span class="w">    </span><span class="nt">credentials</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;{{</span><span class="nv"> </span><span class="s">prefect.blocks.aws-credentials.dev-credentials</span><span class="nv"> </span><span class="s">}}&quot;</span>
</code></pre></div>
<p>Anytime you run <code>prefect deploy</code>, this <code>push</code> section will be executed upon successful completion of your <code>build</code> section. For more information on the mechanics of steps, <a href="#deployment-mechanics">see below</a>.</p>
<h3 id="the-pull-action">The pull action<a class="headerlink" href="#the-pull-action" title="Permanent link">&para;</a></h3>
<p>The pull section is the most important section within the <code>prefect.yaml</code> file. It contains instructions for preparing your flows for a deployment run. These instructions will be executed each time a deployment created within this folder is run via a worker.</p>
<p>There are three main types of steps that typically show up in a <code>pull</code> section:</p>
<ul>
<li><code>set_working_directory</code>: this step simply sets the working directory for the process prior to importing your flow</li>
<li><code>git_clone</code>: this step clones the provided repository on the provided branch</li>
<li><code>pull_from_{cloud}</code>: this step pulls the working directory from a Cloud storage location (e.g., S3)</li>
</ul>
<div class="admonition tip">
<p class="admonition-title">Use block and variable references</p>
<p>All <a href="#templating-options">block and variable references</a> within your pull step will remain unresolved until runtime and will be pulled each time your deployment is run. This allows you to avoid storing sensitive information insecurely; it also allows you to manage certain types of configuration from the API and UI without having to rebuild your deployment every time.</p>
</div>
<p>Below is an example of how to use an existing <code>GitHubCredentials</code> block to clone a private GitHub repository:</p>
<div class="highlight"><pre><span></span><code><span class="nt">pull</span><span class="p">:</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">prefect.deployments.steps.git_clone</span><span class="p">:</span>
<span class="w">        </span><span class="nt">repository</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">https://github.com/org/repo.git</span>
<span class="w">        </span><span class="nt">credentials</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;{{</span><span class="nv"> </span><span class="s">prefect.blocks.github-credentials.my-credentials</span><span class="nv"> </span><span class="s">}}&quot;</span>
</code></pre></div>
<p>Alternatively, you can specify a <code>BitBucketCredentials</code> or <code>GitLabCredentials</code> block to clone from Bitbucket or GitLab. In lieu of a credentials block, you can also provide a GitHub, GitLab, or Bitbucket token directly to the 'access_token` field. You can use a Secret block to do this securely:</p>
<div class="highlight"><pre><span></span><code><span class="nt">pull</span><span class="p">:</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">prefect.deployments.steps.git_clone</span><span class="p">:</span>
<span class="w">        </span><span class="nt">repository</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">https://bitbucket.org/org/repo.git</span>
<span class="w">        </span><span class="nt">access_token</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;{{</span><span class="nv"> </span><span class="s">prefect.blocks.secret.bitbucket-token</span><span class="nv"> </span><span class="s">}}&quot;</span>
</code></pre></div>
<h3 id="utility-steps">Utility steps<a class="headerlink" href="#utility-steps" title="Permanent link">&para;</a></h3>
<p>Utility steps can be used within a build, push, or pull action to assist in managing the deployment lifecycle:</p>
<ul>
<li><code>run_shell_script</code> allows for the execution of one or more shell commands in a subprocess, and returns the standard output and standard error of the script.
This step is useful for scripts that require execution in a specific environment, or those which have specific input and output requirements.</li>
</ul>
<p>Here is an example of retrieving the short Git commit hash of the current repository to use as a Docker image tag:</p>
<div class="highlight"><pre><span></span><code><span class="nt">build</span><span class="p">:</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">prefect.deployments.steps.run_shell_script</span><span class="p">:</span>
<span class="w">        </span><span class="nt">id</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">get-commit-hash</span>
<span class="w">        </span><span class="nt">script</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">git rev-parse --short HEAD</span>
<span class="w">        </span><span class="nt">stream_output</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">false</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">prefect_docker.deployments.steps.build_docker_image</span><span class="p">:</span>
<span class="w">        </span><span class="nt">requires</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">prefect-docker&gt;=0.3.0</span>
<span class="w">        </span><span class="nt">image_name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">my-image</span>
<span class="w">        </span><span class="nt">tag</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;{{</span><span class="nv"> </span><span class="s">get-commit-hash.stdout</span><span class="nv"> </span><span class="s">}}&quot;</span>
<span class="w">        </span><span class="nt">dockerfile</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">auto</span>
</code></pre></div>
<div class="admonition warning">
<p class="admonition-title">Provided environment variables are not expanded by default</p>
<p>To expand environment variables in your shell script, set <code>expand_env_vars: true</code> in your <code>run_shell_script</code> step. For example:</p>
<div class="highlight"><pre><span></span><code><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">prefect.deployments.steps.run_shell_script</span><span class="p">:</span>
<span class="w">    </span><span class="nt">id</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">get-user</span>
<span class="w">    </span><span class="nt">script</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">echo $USER</span>
<span class="w">    </span><span class="nt">stream_output</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
<span class="w">    </span><span class="nt">expand_env_vars</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
</code></pre></div>
<p>Without <code>expand_env_vars: true</code>, the above step would return a literal string <code>$USER</code> instead of the current user.</p>
</div>
<ul>
<li><code>pip_install_requirements</code> installs dependencies from a <code>requirements.txt</code> file within a specified directory.</li>
</ul>
<p>Below is an example of installing dependencies from a <code>requirements.txt</code> file after cloning:</p>
<div class="highlight"><pre><span></span><code><span class="nt">pull</span><span class="p">:</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">prefect.deployments.steps.git_clone</span><span class="p">:</span>
<span class="w">        </span><span class="nt">id</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">clone-step</span><span class="w">  </span><span class="c1"># needed in order to be referenced in subsequent steps</span>
<span class="w">        </span><span class="nt">repository</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">https://github.com/org/repo.git</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">prefect.deployments.steps.pip_install_requirements</span><span class="p">:</span>
<span class="w">        </span><span class="nt">directory</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{{</span><span class="w"> </span><span class="nv">clone-step.directory</span><span class="w"> </span><span class="p p-Indicator">}}</span><span class="w">  </span><span class="c1"># `clone-step` is a user-provided `id` field</span>
<span class="w">        </span><span class="nt">requirements_file</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">requirements.txt</span>
</code></pre></div>
<p>Below is an example that retrieves an access token from a 3rd party Key Vault and uses it in a private clone step:</p>
<div class="highlight"><pre><span></span><code><span class="nt">pull</span><span class="p">:</span>
<span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">prefect.deployments.steps.run_shell_script</span><span class="p">:</span>
<span class="w">    </span><span class="nt">id</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">get-access-token</span>
<span class="w">    </span><span class="nt">script</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">az keyvault secret show --name &lt;secret name&gt; --vault-name &lt;secret vault&gt; --query &quot;value&quot; --output tsv</span>
<span class="w">    </span><span class="nt">stream_output</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">false</span>
<span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">prefect.deployments.steps.git_clone</span><span class="p">:</span>
<span class="w">    </span><span class="nt">repository</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">https://bitbucket.org/samples/deployments.git</span>
<span class="w">    </span><span class="nt">branch</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">master</span>
<span class="w">    </span><span class="nt">access_token</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;{{</span><span class="nv"> </span><span class="s">get-access-token.stdout</span><span class="nv"> </span><span class="s">}}&quot;</span>
</code></pre></div>
<p>You can also run custom steps by packaging them. In the example below, <code>retrieve_secrets</code> is a custom python module that has been packaged into the default working directory of a Docker image (which is /opt/prefect by default).
<code>main</code> is the function entry point, which returns an access token (e.g. <code>return {"access_token": access_token}</code>) like the preceding example, but utilizing the Azure Python SDK for retrieval.</p>
<div class="highlight"><pre><span></span><code><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">retrieve_secrets.main</span><span class="p">:</span>
<span class="w">    </span><span class="nt">id</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">get-access-token</span>
<span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">prefect.deployments.steps.git_clone</span><span class="p">:</span>
<span class="w">    </span><span class="nt">repository</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">https://bitbucket.org/samples/deployments.git</span>
<span class="w">    </span><span class="nt">branch</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">master</span>
<span class="w">    </span><span class="nt">access_token</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;{{</span><span class="nv"> </span><span class="s">get-access-token.access_token</span><span class="nv"> </span><span class="s">}}&#39;</span>
</code></pre></div>
<h3 id="templating-options">Templating options<a class="headerlink" href="#templating-options" title="Permanent link">&para;</a></h3>
<p>Values that you place within your <code>prefect.yaml</code> file can reference dynamic values in several different ways:</p>
<ul>
<li><strong>step outputs</strong>: every step of both <code>build</code> and <code>push</code> produce named fields such as <code>image_name</code>; you can reference these fields within <code>prefect.yaml</code> and <code>prefect deploy</code> will populate them with each call.  References must be enclosed in double brackets and be of the form <code>"{{ field_name }}"</code></li>
<li><strong>blocks</strong>: <a href="/concepts/blocks">Prefect blocks</a> can also be referenced with the special syntax <code>{{ prefect.blocks.block_type.block_slug }}</code>. It is highly recommended that you use block references for any sensitive information (such as a GitHub access token or any credentials) to avoid hardcoding these values in plaintext</li>
<li><strong>variables</strong>: <a href="/concepts/variables">Prefect variables</a> can also be referenced with the special syntax <code>{{ prefect.variables.variable_name }}</code>. Variables can be used to reference non-sensitive, reusable pieces of information such as a default image name or a default work pool name.</li>
<li><strong>environment variables</strong>: you can also reference environment variables with the special syntax <code>{{ $MY_ENV_VAR }}</code>. This is especially useful for referencing environment variables that are set at runtime.</li>
</ul>
<p>As an example, consider the following <code>prefect.yaml</code> file:</p>
<div class="highlight"><pre><span></span><code><span class="nt">build</span><span class="p">:</span>
<span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">prefect_docker.deployments.steps.build_docker_image</span><span class="p">:</span>
<span class="w">    </span><span class="nt">id</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">build-image</span>
<span class="w">    </span><span class="nt">requires</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">prefect-docker&gt;=0.3.0</span>
<span class="w">    </span><span class="nt">image_name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">my-repo/my-image</span>
<span class="w">    </span><span class="nt">tag</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">my-tag</span>
<span class="w">    </span><span class="nt">dockerfile</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">auto</span>
<span class="w">    </span><span class="nt">push</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>

<span class="nt">deployments</span><span class="p">:</span>
<span class="p p-Indicator">-</span><span class="w"> </span><span class="c1"># base metadata</span>
<span class="w">    </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">null</span>
<span class="w">    </span><span class="nt">version</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;{{</span><span class="nv"> </span><span class="s">build-image.tag</span><span class="nv"> </span><span class="s">}}&quot;</span>
<span class="w">    </span><span class="nt">tags</span><span class="p">:</span>
<span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&quot;{{</span><span class="nv"> </span><span class="s">$my_deployment_tag</span><span class="nv"> </span><span class="s">}}&quot;</span>
<span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&quot;{{</span><span class="nv"> </span><span class="s">prefect.variables.some_common_tag</span><span class="nv"> </span><span class="s">}}&quot;</span>
<span class="w">    </span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">null</span>
<span class="w">    </span><span class="nt">schedule</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">null</span>

<span class="w">    </span><span class="c1"># flow-specific fields</span>
<span class="w">    </span><span class="nt">entrypoint</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">null</span>
<span class="w">    </span><span class="nt">parameters</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{}</span>

<span class="w">    </span><span class="c1"># infra-specific fields</span>
<span class="w">    </span><span class="nt">work_pool</span><span class="p">:</span>
<span class="w">        </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;my-k8s-work-pool&quot;</span>
<span class="w">        </span><span class="nt">work_queue_name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">null</span>
<span class="w">        </span><span class="nt">job_variables</span><span class="p">:</span>
<span class="w">            </span><span class="nt">image</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;{{</span><span class="nv"> </span><span class="s">build-image.image</span><span class="nv"> </span><span class="s">}}&quot;</span>
<span class="w">            </span><span class="nt">cluster_config</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;{{</span><span class="nv"> </span><span class="s">prefect.blocks.kubernetes-cluster-config.my-favorite-config</span><span class="nv"> </span><span class="s">}}&quot;</span>
</code></pre></div>
<p>So long as our <code>build</code> steps produce fields called <code>image_name</code> and <code>tag</code>, every time we deploy a new version of our deployment, the <code>{{ build-image.image }}</code> variable will be dynamically populated with the relevant values.</p>
<div class="admonition note">
<p class="admonition-title">Docker step</p>
<p>The most commonly used build step is <a href="/guides/deployment/docker/"><code>prefect_docker.deployments.steps.build_docker_image</code></a> which produces both the <code>image_name</code> and <code>tag</code> fields.</p>
<p>For an example, <a href="/guides/deployment/docker/">check out the deployments tutorial</a>.</p>
</div>
</div>
</div>
</div>
<h3 id="deployment-configurations">Deployment Configurations<a class="headerlink" href="#deployment-configurations" title="Permanent link">&para;</a></h3>
<p>You can create multiple deployments from one or more python file that use <code>.deploy</code>. Similarly a <code>prefect.yaml</code> file can have multiple deployment configurations that control the behavior of created deployments.</p>
<p>These deployments can be managed independently of one another, allowing you to deploy the same flow with different configurations in the same codebase.</p>
<h3 id="working-with-multiple-deployments">Working with multiple deployments<a class="headerlink" href="#working-with-multiple-deployments" title="Permanent link">&para;</a></h3>
<div class="tabbed-set tabbed-alternate" data-tabs="2:2"><input checked="checked" id="__tabbed_2_1" name="__tabbed_2" type="radio" /><input id="__tabbed_2_2" name="__tabbed_2" type="radio" /><div class="tabbed-labels"><label for="__tabbed_2_1">.deploy</label><label for="__tabbed_2_2">prefect.yaml</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<p>To create multiple work pool-based deployments at once you can use the <code>deploy</code> function, which is analogous to the <code>serve</code> function.</p>
<div class="highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">prefect</span> <span class="kn">import</span> <span class="n">deploy</span><span class="p">,</span> <span class="n">flow</span>

<span class="nd">@flow</span><span class="p">(</span><span class="n">log_prints</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">buy</span><span class="p">():</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Buying securities&quot;</span><span class="p">)</span>


<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s2">&quot;__main__&quot;</span><span class="p">:</span>
    <span class="n">deploy</span><span class="p">(</span>
        <span class="n">buy</span><span class="o">.</span><span class="n">to_deployment</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;dev-deploy&quot;</span><span class="p">,</span> <span class="n">work_pool_name</span><span class="o">=</span><span class="s2">&quot;my-dev-work-pool&quot;</span><span class="p">),</span>
        <span class="n">buy</span><span class="o">.</span><span class="n">to_deployment</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;prod-deploy&quot;</span><span class="p">,</span> <span class="n">work_pool_name</span><span class="o">=</span><span class="s2">&quot;my-prod-work-pool&quot;</span><span class="p">),</span>
        <span class="n">image</span><span class="o">=</span><span class="s2">&quot;my-registry/my-image:dev&quot;</span><span class="p">,</span>
        <span class="n">push</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
    <span class="p">)</span>
</code></pre></div>
<p>Note that in the example above we created two deployments from the same flow, but with different work pools.
Alternatively, we could have created two deployments from different flows.</p>
<div class="highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">prefect</span> <span class="kn">import</span> <span class="n">deploy</span><span class="p">,</span> <span class="n">flow</span>

<span class="nd">@flow</span><span class="p">(</span><span class="n">log_prints</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">buy</span><span class="p">():</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Buying securities.&quot;</span><span class="p">)</span>

<span class="nd">@flow</span><span class="p">(</span><span class="n">log_prints</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">sell</span><span class="p">():</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Selling securities.&quot;</span><span class="p">)</span>


<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s2">&quot;__main__&quot;</span><span class="p">:</span>
    <span class="n">deploy</span><span class="p">(</span>
        <span class="n">buy</span><span class="o">.</span><span class="n">to_deployment</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;buy-deploy&quot;</span><span class="p">),</span>
        <span class="n">sell</span><span class="o">.</span><span class="n">to_deployment</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;sell-deploy&quot;</span><span class="p">),</span>
        <span class="n">work_pool_name</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="n">my</span><span class="o">-</span><span class="n">dev</span><span class="o">-</span><span class="n">work</span><span class="o">-</span><span class="n">pool</span><span class="s2">&quot;</span>
        <span class="n">image</span><span class="o">=</span><span class="s2">&quot;my-registry/my-image:dev&quot;</span><span class="p">,</span>
        <span class="n">push</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
    <span class="p">)</span>
</code></pre></div>
<p>In the example above the code for both flows gets baked into the same image.</p>
<p>We can specify that one or more flows should be pulled from a remote location at runtime by using the <code>from_source</code> method.
Here's an example of deploying two flows, one defined locally and one defined in a remote repository:</p>
<div class="highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">prefect</span> <span class="kn">import</span> <span class="n">deploy</span><span class="p">,</span> <span class="n">flow</span>


<span class="nd">@flow</span><span class="p">(</span><span class="n">log_prints</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">local_flow</span><span class="p">():</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;I&#39;m a flow!&quot;</span><span class="p">)</span>

<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s2">&quot;__main__&quot;</span><span class="p">:</span>
<span class="hll">    <span class="n">deploy</span><span class="p">(</span>
</span><span class="hll">        <span class="n">local_flow</span><span class="o">.</span><span class="n">to_deployment</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;example-deploy-local-flow&quot;</span><span class="p">),</span>
</span><span class="hll">        <span class="n">flow</span><span class="o">.</span><span class="n">from_source</span><span class="p">(</span>
</span><span class="hll">            <span class="n">source</span><span class="o">=</span><span class="s2">&quot;https://github.com/org/repo.git&quot;</span><span class="p">,</span>
</span><span class="hll">            <span class="n">entrypoint</span><span class="o">=</span><span class="s2">&quot;flows.py:my_flow&quot;</span><span class="p">,</span>
</span><span class="hll">        <span class="p">)</span><span class="o">.</span><span class="n">to_deployment</span><span class="p">(</span>
</span><span class="hll">            <span class="n">name</span><span class="o">=</span><span class="s2">&quot;example-deploy-remote-flow&quot;</span><span class="p">,</span>
</span><span class="hll">        <span class="p">),</span>
</span><span class="hll">        <span class="n">work_pool_name</span><span class="o">=</span><span class="s2">&quot;my-work-pool&quot;</span><span class="p">,</span>
</span><span class="hll">        <span class="n">image</span><span class="o">=</span><span class="s2">&quot;my-registry/my-image:dev&quot;</span><span class="p">,</span>
</span><span class="hll">    <span class="p">)</span>
</span></code></pre></div>
<p>You could pass any number of flows to the <code>deploy</code> function.
This behavior is useful if using a monorepo approach to your workflows.</p>
</div>
<div class="tabbed-block">
<p>Prefect supports multiple deployment declarations within the <code>prefect.yaml</code> file. This method of declaring multiple deployments allows the configuration for all deployments to be version controlled and deployed with a single command.</p>
<p>New deployment declarations can be added to the <code>prefect.yaml</code> file by adding a new entry to the <code>deployments</code> list. Each deployment declaration must have a unique <code>name</code> field which is used to select deployment declarations when using the <code>prefect deploy</code> command.</p>
<p>For example, consider the following <code>prefect.yaml</code> file:</p>
<div class="highlight"><pre><span></span><code><span class="nt">build</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">...</span>
<span class="nt">push</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">...</span>
<span class="nt">pull</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">...</span>

<span class="nt">deployments</span><span class="p">:</span>
<span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">deployment-1</span>
<span class="w">    </span><span class="l l-Scalar l-Scalar-Plain">entrypoint</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">flows/hello.py:my_flow</span>
<span class="w">    </span><span class="l l-Scalar l-Scalar-Plain">parameters</span><span class="p p-Indicator">:</span>
<span class="w">        </span><span class="nt">number</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">42,</span>
<span class="w">        </span><span class="nt">message</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Don&#39;t panic!</span>
<span class="w">  </span><span class="w w-Error">  </span><span class="nt">work_pool</span><span class="p">:</span>
<span class="w">        </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">my-process-work-pool</span>
<span class="w">        </span><span class="nt">work_queue_name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">primary-queue</span>

<span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">deployment-2</span>
<span class="w">    </span><span class="l l-Scalar l-Scalar-Plain">entrypoint</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">flows/goodbye.py:my_other_flow</span>
<span class="w">    </span><span class="l l-Scalar l-Scalar-Plain">work_pool</span><span class="p p-Indicator">:</span>
<span class="w">        </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">my-process-work-pool</span>
<span class="w">        </span><span class="nt">work_queue_name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">secondary-queue</span>

<span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">deployment-3</span>
<span class="w">    </span><span class="l l-Scalar l-Scalar-Plain">entrypoint</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">flows/hello.py:yet_another_flow</span>
<span class="w">    </span><span class="l l-Scalar l-Scalar-Plain">work_pool</span><span class="p p-Indicator">:</span>
<span class="w">        </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">my-docker-work-pool</span>
<span class="w">        </span><span class="nt">work_queue_name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">tertiary-queue</span>
</code></pre></div>
<p>This file has three deployment declarations, each referencing a different flow. Each deployment declaration has a unique <code>name</code> field and can be deployed individually by using the <code>--name</code> flag when deploying.</p>
<p>For example, to deploy <code>deployment-1</code> you would run:</p>
<p><div class="terminal">
<div class="highlight"><pre><span></span><code>prefect<span class="w"> </span>deploy<span class="w"> </span>--name<span class="w"> </span>deployment-1
</code></pre></div>
</div></p>
<p>To deploy multiple deployments you can provide multiple <code>--name</code> flags:</p>
<p><div class="terminal">
<div class="highlight"><pre><span></span><code>prefect<span class="w"> </span>deploy<span class="w"> </span>--name<span class="w"> </span>deployment-1<span class="w"> </span>--name<span class="w"> </span>deployment-2
</code></pre></div>
</div></p>
<p>To deploy multiple deployments with the same name, you can prefix the deployment name with its flow name:</p>
<p><div class="terminal">
<div class="highlight"><pre><span></span><code>prefect<span class="w"> </span>deploy<span class="w"> </span>--name<span class="w"> </span>my_flow/deployment-1<span class="w"> </span>--name<span class="w"> </span>my_other_flow/deployment-1
</code></pre></div>
</div></p>
<p>To deploy all deployments you can use the <code>--all</code> flag:</p>
<p><div class="terminal">
<div class="highlight"><pre><span></span><code>prefect<span class="w"> </span>deploy<span class="w"> </span>--all
</code></pre></div>
</div></p>
<p>To deploy deployments that match a pattern you can run:</p>
<p><div class="terminal">
<div class="highlight"><pre><span></span><code>prefect<span class="w"> </span>deploy<span class="w"> </span>-n<span class="w"> </span>my-flow/*<span class="w"> </span>-n<span class="w"> </span>*dev/my-deployment<span class="w"> </span>-n<span class="w"> </span>dep*prod
</code></pre></div>
</div></p>
<p>The above command will deploy all deployments from the flow <code>my-flow</code>, all flows ending in <code>dev</code> with a deployment named <code>my-deployment</code>, and all deployments starting with <code>dep</code> and ending in <code>prod</code>.</p>
<div class="admonition note">
<p class="admonition-title">CLI Options When Deploying Multiple Deployments</p>
<p>When deploying more than one deployment with a single <code>prefect deploy</code> command, any additional attributes provided via the CLI will be ignored.</p>
<p>To provide overrides to a deployment via the CLI, you must deploy that deployment individually.</p>
</div>
<h3 id="reusing-configuration-across-deployments">Reusing configuration across deployments<a class="headerlink" href="#reusing-configuration-across-deployments" title="Permanent link">&para;</a></h3>
<p>Because a <code>prefect.yaml</code> file is a standard YAML file, you can use <a href="https://yaml.org/spec/1.2.2/#71-alias-nodes">YAML aliases</a> to reuse configuration across deployments.</p>
<p>This functionality is useful when multiple deployments need to share the work pool configuration, deployment actions, or other configurations.</p>
<p>You can declare a YAML alias by using the <code>&amp;{alias_name}</code> syntax and insert that alias elsewhere in the file with the <code>*{alias_name}</code> syntax. When aliasing YAML maps, you can also override specific fields of the aliased map by using the <code>&lt;&lt;: *{alias_name}</code> syntax and adding additional fields below.</p>
<p>We recommend adding a <code>definitions</code> section to your <code>prefect.yaml</code> file at the same level as the <code>deployments</code> section to store your aliases.</p>
<p>For example, consider the following <code>prefect.yaml</code> file:</p>
<div class="highlight"><pre><span></span><code><span class="nt">build</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">...</span>
<span class="nt">push</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">...</span>
<span class="nt">pull</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">...</span>

<span class="nt">definitions</span><span class="p">:</span>
<span class="w">    </span><span class="nt">work_pools</span><span class="p">:</span>
<span class="w">        </span><span class="nt">my_docker_work_pool</span><span class="p">:</span><span class="w"> </span><span class="nl">&amp;my_docker_work_pool</span>
<span class="w">            </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">my-docker-work-pool</span>
<span class="w">            </span><span class="nt">work_queue_name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">default</span>
<span class="w">            </span><span class="nt">job_variables</span><span class="p">:</span>
<span class="w">                </span><span class="nt">image</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;{{</span><span class="nv"> </span><span class="s">build-image.image</span><span class="nv"> </span><span class="s">}}&quot;</span>
<span class="w">    </span><span class="nt">schedules</span><span class="p">:</span>
<span class="w">        </span><span class="nt">every_ten_minutes</span><span class="p">:</span><span class="w"> </span><span class="nl">&amp;every_10_minutes</span>
<span class="w">            </span><span class="nt">interval</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">600</span>
<span class="w">    </span><span class="nt">actions</span><span class="p">:</span>
<span class="w">        </span><span class="nt">docker_build</span><span class="p">:</span><span class="w"> </span><span class="nl">&amp;docker_build</span>
<span class="w">            </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">prefect_docker.deployments.steps.build_docker_image</span><span class="p">:</span><span class="w"> </span><span class="nl">&amp;docker_build_config</span>
<span class="w">                </span><span class="nt">id</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">build-image</span>
<span class="w">                </span><span class="nt">requires</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">prefect-docker&gt;=0.3.0</span>
<span class="w">                </span><span class="nt">image_name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">my-example-image</span>
<span class="w">                </span><span class="nt">tag</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">dev</span>
<span class="w">                </span><span class="nt">dockerfile</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">auto</span>
<span class="w">                </span><span class="nt">push</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>

<span class="nt">deployments</span><span class="p">:</span>
<span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">deployment-1</span>
<span class="w">    </span><span class="l l-Scalar l-Scalar-Plain">entrypoint</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">flows/hello.py:my_flow</span>
<span class="w">    </span><span class="l l-Scalar l-Scalar-Plain">schedule</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="nv">*every_10_minutes</span>
<span class="w">    </span><span class="nt">parameters</span><span class="p">:</span>
<span class="w">        </span><span class="nt">number</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">42,</span>
<span class="w">        </span><span class="nt">message</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Don&#39;t panic!</span>
<span class="w">    </span><span class="nt">work_pool</span><span class="p">:</span><span class="w"> </span><span class="nv">*my_docker_work_pool</span>
<span class="w">    </span><span class="nt">build</span><span class="p">:</span><span class="w"> </span><span class="nv">*docker_build</span><span class="w"> </span><span class="c1"># Uses the full docker_build action with no overrides</span>

<span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">deployment-2</span>
<span class="w">    </span><span class="l l-Scalar l-Scalar-Plain">entrypoint</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">flows/goodbye.py:my_other_flow</span>
<span class="w">    </span><span class="l l-Scalar l-Scalar-Plain">work_pool</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="nv">*my_docker_work_pool</span>
<span class="w">    </span><span class="nt">build</span><span class="p">:</span>
<span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">prefect_docker.deployments.steps.build_docker_image</span><span class="p">:</span>
<span class="w">            </span><span class="nt">&lt;&lt;</span><span class="p">:</span><span class="w"> </span><span class="nv">*docker_build_config</span><span class="w"> </span><span class="c1"># Uses the docker_build_config alias and overrides the dockerfile field</span>
<span class="w">            </span><span class="nt">dockerfile</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Dockerfile.custom</span>

<span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">deployment-3</span>
<span class="w">    </span><span class="l l-Scalar l-Scalar-Plain">entrypoint</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">flows/hello.py:yet_another_flow</span>
<span class="w">    </span><span class="l l-Scalar l-Scalar-Plain">schedule</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="nv">*every_10_minutes</span>
<span class="w">    </span><span class="nt">work_pool</span><span class="p">:</span>
<span class="w">        </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">my-process-work-pool</span>
<span class="w">        </span><span class="nt">work_queue_name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">primary-queue</span>
</code></pre></div>
<p>In the above example, we are using YAML aliases to reuse work pool, schedule, and build configuration across multiple deployments:</p>
<ul>
<li><code>deployment-1</code> and <code>deployment-2</code> are using the same work pool configuration</li>
<li><code>deployment-1</code> and <code>deployment-3</code> are using the same schedule</li>
<li><code>deployment-1</code> and <code>deployment-2</code> are using the same build deployment action, but <code>deployment-2</code> is overriding the <code>dockerfile</code> field to use a custom Dockerfile</li>
</ul>
<h2 id="deployment-declaration-reference">Deployment declaration reference<a class="headerlink" href="#deployment-declaration-reference" title="Permanent link">&para;</a></h2>
<h3 id="deployment-fields">Deployment fields<a class="headerlink" href="#deployment-fields" title="Permanent link">&para;</a></h3>
<p>Below are fields that can be added to each deployment declaration.</p>
<table>
<thead>
<tr>
<th>Property</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>name</code></td>
<td>The name to give to the created deployment. Used with the <code>prefect deploy</code> command to create or update specific deployments.</td>
</tr>
<tr>
<td><code>version</code></td>
<td>An optional version for the deployment.</td>
</tr>
<tr>
<td><code>tags</code></td>
<td>A list of strings to assign to the deployment as tags.</td>
</tr>
<tr>
<td><span class="no-wrap"><code>description</code></span></td>
<td>An optional description for the deployment.</td>
</tr>
<tr>
<td><code>schedule</code></td>
<td>An optional <a href="/concepts/schedules">schedule</a> to assign to the deployment. Fields for this section are documented in the <a href="#schedule-fields">Schedule Fields</a> section.</td>
</tr>
<tr>
<td><code>triggers</code></td>
<td>An optional array of <a href="/concepts/deployments/#create-a-flow-run-with-an-event-trigger">triggers</a> to assign to the deployment</td>
</tr>
<tr>
<td><code>entrypoint</code></td>
<td>Required path to the <code>.py</code> file containing the flow you want to deploy (relative to the root directory of your development folder) combined with the name of the flow function. Should be in the format <code>path/to/file.py:flow_function_name</code>.</td>
</tr>
<tr>
<td><code>parameters</code></td>
<td>Optional default values to provide for the parameters of the deployed flow. Should be an object with key/value pairs.</td>
</tr>
<tr>
<td><span class="no-wrap"><code>enforce_parameter_schema</code></span></td>
<td>Boolean flag that determines whether the API should validate the parameters passed to a flow run against the parameter schema generated for the deployed flow.</td>
</tr>
<tr>
<td><code>work_pool</code></td>
<td>Information on where to schedule flow runs for the deployment. Fields for this section are documented in the <a href="#work-pool-fields">Work Pool Fields</a> section.</td>
</tr>
</tbody>
</table>
<h3 id="schedule-fields">Schedule fields<a class="headerlink" href="#schedule-fields" title="Permanent link">&para;</a></h3>
<p>Below are fields that can be added to a deployment declaration's <code>schedule</code> section.</p>
<table>
<thead>
<tr>
<th>Property</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>interval</code></td>
<td>Number of seconds indicating the time between flow runs. Cannot be used in conjunction with <code>cron</code> or <code>rrule</code>.</td>
</tr>
<tr>
<td><span class="no-wrap"><code>anchor_date</code></span></td>
<td>Datetime string indicating the starting or "anchor" date to begin the schedule. If no <code>anchor_date</code> is supplied, the current UTC time is used. Can only be used with <code>interval</code>.</td>
</tr>
<tr>
<td><code>timezone</code></td>
<td>String name of a time zone, used to enforce localization behaviors like DST boundaries. See the <a href="https://www.iana.org/time-zones">IANA Time Zone Database</a> for valid time zones.</td>
</tr>
<tr>
<td><code>cron</code></td>
<td>A valid cron string. Cannot be used in conjunction with <code>interval</code> or <code>rrule</code>.</td>
</tr>
<tr>
<td><code>day_or</code></td>
<td>Boolean indicating how croniter handles day and day_of_week entries. Must be used with <code>cron</code>. Defaults to <code>True</code>.</td>
</tr>
<tr>
<td><code>rrule</code></td>
<td>String representation of an RRule schedule. See the <a href="https://dateutil.readthedocs.io/en/stable/rrule.html#rrulestr-examples"><code>rrulestr</code> examples</a> for syntax. Cannot be used in conjunction with <code>interval</code> or <code>cron</code>.</td>
</tr>
</tbody>
</table>
<p>For more information about schedules, see the <a href="/concepts/schedules/#creating-schedules-through-a-deployment-yaml-files-schedule-section">Schedules</a> concept doc.</p>
<h3 id="work-pool-fields">Work pool fields<a class="headerlink" href="#work-pool-fields" title="Permanent link">&para;</a></h3>
<p>Below are fields that can be added to a deployment declaration's <code>work_pool</code> section.</p>
<table>
<thead>
<tr>
<th>Property</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>name</code></td>
<td>The name of the work pool to schedule flow runs in for the deployment.</td>
</tr>
<tr>
<td><span class="no-wrap"><code>work_queue_name</code></span></td>
<td>The name of the work queue within the specified work pool to schedule flow runs in for the deployment. If not provided, the default queue for the specified work pool will be used.</td>
</tr>
<tr>
<td><code>job_variables</code></td>
<td>Values used to override the default values in the specified work pool's <a href="/concepts/work-pools/#base-job-template">base job template</a>. Maps directly to a created deployments <code>infra_overrides</code> attribute.</td>
</tr>
</tbody>
</table>
<h2 id="deployment-mechanics">Deployment mechanics<a class="headerlink" href="#deployment-mechanics" title="Permanent link">&para;</a></h2>
<p>Anytime you run <code>prefect deploy</code> in a directory that contains a <code>prefect.yaml</code> file, the following actions are taken in order:</p>
<ul>
<li>The <code>prefect.yaml</code> file is loaded. First, the <code>build</code> section is loaded and all variable and block references are resolved. The steps are then run in the order provided.</li>
<li>Next, the <code>push</code> section is loaded and all variable and block references are resolved; the steps within this section are then run in the order provided</li>
<li>Next, the <code>pull</code> section is templated with any step outputs but <em>is not run</em>.  Note that block references are <em>not</em> hydrated for security purposes - block references are always resolved at runtime</li>
<li>Next, all variable and block references are resolved with the deployment declaration.  All flags provided via the <code>prefect deploy</code> CLI are then overlaid on the values loaded from the file.</li>
<li>The final step occurs when the fully realized deployment specification is registered with the Prefect API</li>
</ul>
<div class="admonition tip">
<p class="admonition-title">Deployment Instruction Overrides</p>
<p>The <code>build</code>, <code>push</code>, and <code>pull</code> sections in deployment definitions take precedence over the corresponding sections above them in <code>prefect.yaml</code>.</p>
</div>
<p>Each time a step is run, the following actions are taken in order:</p>
<ul>
<li>The step's inputs and block / variable references are resolved (see <a href="#templating-options">the templating documentation above</a> for more details).</li>
<li>The step's function is imported; if it cannot be found, the special <code>requires</code> keyword is used to install the necessary packages</li>
<li>The step's function is called with the resolved inputs.</li>
<li>The step's output is returned and used to resolve inputs for subsequent steps.</li>
</ul>
</div>
</div>
</div>
<h2 id="next-steps">Next steps<a class="headerlink" href="#next-steps" title="Permanent link">&para;</a></h2>
<p>Now that you are familiar with creating deployments, you may want to explore <a href="/guides/deployment/kubernetes">push work pools</a> or <a href="/guides/deployment/kubernetes">Kubernetes work pools</a>.</p>







  
  



  



  <form class="md-feedback" name="feedback" hidden>
    <fieldset>
      <legend class="md-feedback__title">
        Was this page helpful?
      </legend>
      <div class="md-feedback__inner">
        <div class="md-feedback__list">
          
            <button class="md-feedback__icon md-icon" type="submit" title="This page was helpful" data-md-value="1">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 12a8 8 0 0 0-8-8 8 8 0 0 0-8 8 8 8 0 0 0 8 8 8 8 0 0 0 8-8m2 0a10 10 0 0 1-10 10A10 10 0 0 1 2 12 10 10 0 0 1 12 2a10 10 0 0 1 10 10M10 9.5c0 .8-.7 1.5-1.5 1.5S7 10.3 7 9.5 7.7 8 8.5 8s1.5.7 1.5 1.5m7 0c0 .8-.7 1.5-1.5 1.5S14 10.3 14 9.5 14.7 8 15.5 8s1.5.7 1.5 1.5m-5 7.73c-1.75 0-3.29-.73-4.19-1.81L9.23 14c.45.72 1.52 1.23 2.77 1.23s2.32-.51 2.77-1.23l1.42 1.42c-.9 1.08-2.44 1.81-4.19 1.81Z"/></svg>
            </button>
          
            <button class="md-feedback__icon md-icon" type="submit" title="This page could be improved" data-md-value="0">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 12a8 8 0 0 0-8-8 8 8 0 0 0-8 8 8 8 0 0 0 8 8 8 8 0 0 0 8-8m2 0a10 10 0 0 1-10 10A10 10 0 0 1 2 12 10 10 0 0 1 12 2a10 10 0 0 1 10 10m-6.5-4c.8 0 1.5.7 1.5 1.5s-.7 1.5-1.5 1.5-1.5-.7-1.5-1.5.7-1.5 1.5-1.5M10 9.5c0 .8-.7 1.5-1.5 1.5S7 10.3 7 9.5 7.7 8 8.5 8s1.5.7 1.5 1.5m2 4.5c1.75 0 3.29.72 4.19 1.81l-1.42 1.42C14.32 16.5 13.25 16 12 16s-2.32.5-2.77 1.23l-1.42-1.42C8.71 14.72 10.25 14 12 14Z"/></svg>
            </button>
          
        </div>
        <div class="md-feedback__note">
          
            <div data-md-value="1" hidden>
              
              
                
              
              Thank you for your feedback!
            </div>
          
            <div data-md-value="0" hidden>
              
              
                
              
              Thank you for your feedback! Feel free to <a href="https://github.com/PrefectHQ/prefect/issues/new?assignees=&amp;labels=docs%2Cstatus%3Atriage&amp;projects=&amp;template=4_docs_change.yaml" target="_blank" rel="noopener"> open an issue </a> with more detail.
            </div>
          
        </div>
      </div>
    </fieldset>
  </form>


                
              </article>
            </div>
          
          
  <script>var tabs=__md_get("__tabs");if(Array.isArray(tabs))e:for(var set of document.querySelectorAll(".tabbed-set")){var tab,labels=set.querySelector(".tabbed-labels");for(tab of tabs)for(var label of labels.getElementsByTagName("label"))if(label.innerText.trim()===tab){var input=document.getElementById(label.htmlFor);input.checked=!0;continue e}}</script>

<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "../..", "features": ["announce.dismiss", "content.action.edit", "content.code.copy", "navigation.tabs.sticky", "search.suggest", "search.highlight", "navigation.path", "navigation.indexes", "content.tabs.link"], "search": "../../assets/javascripts/workers/search.1e90e0fb.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": {"provider": "mike"}}</script>
    
    
      <script src="../../assets/javascripts/bundle.a5ca32a6.min.js"></script>
      
        <script src="../../js/custom.js"></script>
      
        <script src="../../js/termynal.js"></script>
      
    
  </body>
</html>